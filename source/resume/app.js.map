{"version":3,"sources":["webpack://app/webpack/universalModuleDefinition","webpack://app/. sync ./node_modules/raw-loader/dist/cjs.js ^\\.\\/styles.*\\.css$","webpack://app/./styles0.css","webpack://app/./styles1.css","webpack://app/./styles2.css","webpack://app/./styles3.css","webpack://app/./work.txt","webpack://app/./lib/replaceURLs.js","webpack://app/./lib/writeChar.js","webpack://app/./app.js","webpack://app/./lib/getPrefix.js","webpack://app/./prestyles.css"],"names":["root","factory","exports","module","define","amd","window","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","urlRegex","createAnchors","message","regex","replace","match","length","i","regexReplace","test","slice","indexOf","href","styleBuffer","fullTextStorage","writeChar","el","char","style","fullText","innerHTML","handleChar","textContent","writeSimpleChar","openComment","openCSSBlock","commentRegex","keyRegex","valueRegex","selectorRegex","pxRegex","pxRegex2","styleEl","workEl","pgpEl","browserPrefix","md","Markdown","markdown","toHTML","styleText","require","speed","location","hostname","animationSkipped","done","paused","a","writeTo","workText","createWorkBox","Promise","delay","surprisinglyShortAttentionSpan","txt","join","styleHTML","start","Date","now","scrollTop","Infinity","document","addEventListener","preStyleEl","prefixes","documentElement","getPrefix","text","createElement","head","insertBefore","getElementsByTagName","getElementById","startAnimation","endOfSentence","comma","endOfBlock","index","interval","mirrorToStyle","charsPerInterval","chars","scrollHeight","thisInterval","thisSlice","classList","contains","replaceURLs","add","flipping","dx","dy","flipped","half","clientHeight","toggle"],"mappings":"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","file":"app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"app\"] = factory();\n\telse\n\t\troot[\"app\"] = factory();\n})(window, function() {\nreturn ","var map = {\n\t\"./styles0.css\": 15,\n\t\"./styles1.css\": 16,\n\t\"./styles2.css\": 17,\n\t\"./styles3.css\": 18\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 14;","export default \"/**\\r\\n *\\r\\n * 你好。我叫汤利俊。从事前端开发工作。\\r\\n *\\r\\n * 我喜欢研究一些前端有趣的交互。\\r\\n *\\r\\n * 要不来一场直播写代码？\\r\\n */\\r\\n\\r\\n/**\\r\\n * 那么开始吧，首先让一切都动起来~\\r\\n */\\r\\n\\r\\n* {\\r\\n  -webkit-transition: all .5s;\\r\\n}\\r\\n\\r\\n/**\\r\\n * 这看似没用呀，别急，一会儿你就会看到效果了。\\r\\n *\\r\\n * 我们来做一些变化。\\r\\n */\\r\\n\\r\\nhtml {\\r\\n  background: #336699;\\r\\n}\\r\\n\\r\\n/***\\r\\n * 等等。\\r\\n */\\r\\n\\r\\npre {\\r\\n  color: #ccc;\\r\\n}\\r\\n\\r\\n/**\\r\\n * 看上去好多了。但是有点刺眼了。\\r\\n *\\r\\n * 而且在整个屏幕上写代码有点浪费空间了。\\r\\n *\\r\\n * 我来做一些优化。\\r\\n */\\r\\n\\r\\npre:not(:empty) {\\r\\n  overflow: auto;\\r\\n  background: #333;\\r\\n  height: 44.6%;\\r\\n  width: 50%;\\r\\n  font-family: Arial;\\r\\n  padding: 10px 10px 20px;\\r\\n  white-space: pre-wrap;\\r\\n  outline: 0;\\r\\n}\\r\\n\\r\\n/**\\r\\n * 接下来我们在把它移到屏幕右侧。\\r\\n */\\r\\n\\r\\n#style-text {\\r\\n  -webkit-transform: translateX(90%);\\r\\n  position: absolute;\\r\\n}\\r\\n\\r\\n/**\\r\\n * 看上去还不错喔, 但是所有的字体颜色是单色的！\\r\\n *\\r\\n * 那么，我们来把代码变的更加可读吧~\\r\\n */\\r\\n\\r\\n.comment {\\r\\n  color: #888;\\r\\n  font-style: italic;\\r\\n}\\r\\n.selector {\\r\\n  color: #ff6600;\\r\\n}\\r\\n.key {\\r\\n  color: #ffff99;\\r\\n}\\r\\n.value {\\r\\n  color: #99cccc;\\r\\n}\\r\\n.value.px {\\r\\n  color: #99cccc;\\r\\n}\\r\\n\\r\\n/**\\r\\n * 现在我们有了一些进展。\\r\\n *\\r\\n * 再把它变得更立体一些。\\r\\n */\\r\\n\\r\\nbody {\\r\\n  -webkit-perspective: 1000px;\\r\\n}\\r\\n\\r\\n#style-text {\\r\\n  -webkit-transform: translateX(98.5%) rotateY(-10deg);\\r\\n  -webkit-transform-origin: right;\\r\\n  height: 94.5%;\\r\\n}\\r\\n\\r\\n/**\\r\\n * 好吧差不多了，接下来就聊聊我吧。\\r\\n *\\r\\n * 我相信你应该不是来只看我炫技的吧？\\r\\n */\\r\\n\\r\\npre:not(#style-text) {\\r\\n  -webkit-transform: rotateY(10deg);\\r\\n  -webkit-transform-origin: left;\\r\\n}\\r\\n\"","export default \"\\r\\n/**\\r\\n * 左侧的 markdown 看起来并不美观。\\r\\n *\\r\\n * 我们稍作修饰。\\r\\n */\\r\\n\\r\\n#work-text {\\r\\n  height: 94.5%;\\r\\n  background-color: #ffffcc;\\r\\n  color: #ff9900;\\r\\n}\\r\\n\\r\\n#work-text a {\\r\\n  color: #ff9900;\\r\\n}\\r\\n\\r\\n#work-text.flipped {\\r\\n  -webkit-transform: rotateX(0deg) rotateY(190deg) rotateZ(180deg);\\r\\n}\\r\\n\\r\\n#work-text .md {\\r\\n  -webkit-transform: rotateY(190deg) rotateZ(180deg);\\r\\n  margin-top: 1200px;\\r\\n}\\r\\n\\r\\n/**\\r\\n * 下面就是见证奇迹的时刻：\\r\\n *\\r\\n * 3。\\r\\n * 2。\\r\\n * 1。\\r\\n *\\r\\n * 。\\r\\n * 骗你啦，啥也没有~\\r\\n *\\r\\n * 好吧，其实是有的，来了。\\r\\n *\\r\\n */\\r\\n\"","export default \"\\r\\n/**\\r\\n * 文本可以做一些适当调整。\\r\\n */\\r\\n\\r\\n.md {\\r\\n  font-family: 'Arial';\\r\\n}\\r\\n\\r\\n.md h1, .md h2, .md h3, .md h4, .md h5, .md h6 {\\r\\n  display: inline-block;\\r\\n  border-bottom: 1px solid #ff9900;\\r\\n  padding-bottom: 5px;\\r\\n}\\r\\n\\r\\n.md li {\\r\\n  margin: 5px 0;\\r\\n  line-height: 1.2;\\r\\n}\\r\\n\\r\\n.md h1, .md h2, .md h3, .md h4, .md h5, .md h6, .md ul, .md p {\\r\\n  margin: 0px;\\r\\n}\\r\\n\\r\\n/**\\r\\n * 还差最后一点就结束了。\\r\\n * 我们来给文字添加一些阴影。\\r\\n */\\r\\n\\r\\n#work-text, #work-text a {\\r\\n  text-shadow: 1px 1px 0 #ddd;\\r\\n}\\r\\n\\r\\n/**\\r\\n * 希望你能喜欢，这个创意是参考国外一个牛人的\\r\\n */\\r\\n\"","export default \"\\r\\n/**\\r\\n * We're almost done.\\r\\n */\\r\\n\\r\\n pre:hover{\\r\\n   box-shadow: 0px 0px 40px 5px rgba(255,255,255,0.4);\\r\\n }\\r\\n\\r\\n #skip-animation, #pause-resume {\\r\\n   display: none;\\r\\n }\\r\\n\\r\\n/**\\r\\n * I hope you enjoyed this.\\r\\n *\\r\\n * Thanks to Jake Albaugh, who was the first (that I know of) to do\\r\\n * a page like this. Some of the autotyping and syntax highlighting\\r\\n * code is based off his work.\\r\\n *\\r\\n * See more of Jake's work at http://codepen.io/jakealbaugh/\\r\\n */\\r\\n\\r\\n/**\\r\\n * By the way, you can edit this box. Try adding new CSS!\\r\\n *\\r\\n * For example,\\r\\n *\\r\\n * The property 'text-shadow' takes the parameters:\\r\\n * 'x', 'y', 'blur', 'color'.\\r\\n *\\r\\n * So if I wanted to mirror the values,\\r\\n * I could place a shadow 15px under it,\\r\\n * with a little blur for effect:\\r\\n */\\r\\n\\r\\n.value {\\r\\n  text-shadow: 0px 15px 1px white;\\r\\n}\\r\\n\\r\\n/**\\r\\n * Try it out! There's lots you can do.\\r\\n * Try playing with text sizes, shadows, animations, or just\\r\\n * break the page. I won't hold it against you.\\r\\n */\\r\\n\\r\\n\\r\\n\"","export default \"基本资料\\r\\n=========\\r\\n\\r\\n* 姓名：汤利俊。\\r\\n* 博客：https://tanglj.cn。\\r\\n* GitHub：https://github.com/cntanglijun。\\r\\n* 力扣：https://leetcode-cn.com/u/tanglj。\\r\\n\\r\\n个人概况\\r\\n-------\\r\\n\\r\\n* 5 年前端开发，2 年 TL 经验。\\r\\n* 主要技术栈有：Vue / React / 小程序（Taro 框架）/ Git。\\r\\n* 熟悉 DevOps 工作模式，对 Node.js 有一定了解。\\r\\n\\r\\n业余爱好\\r\\n--------\\r\\n\\r\\n* 编程、看书、健身、长跑、做菜。\\r\\n\"","const urlRegex = /((([A-Za-z]{3,9}:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w\\-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w!\\/]*))?)/g;\r\n\r\nexport default function createAnchors(message) {\r\n  return regexReplace(message, urlRegex, function(match) {\r\n    // Don't break <img src=\"http:...\" /> or mailtos or other anchors\r\n    if (/(src=|href=|mailto:)/.test(message.slice(message.indexOf(match) - 7).slice(0, 7))) return match;\r\n    let href = match;\r\n    if (match.slice(0, 4) !== 'http') href = 'http://' + href;\r\n    return '<a href=\"' + href + '\" target=\"_blank\">' + match.replace('www.', '') + '</a>';\r\n  });\r\n};\r\n\r\n// Simple regex replace function.\r\nexport function regexReplace(message, regex, replace) {\r\n  const match = message.match(regex);\r\n  if (match && match.length) {\r\n    for (let i = 0; i < match.length; i++) {\r\n      message = message.replace(match[i], (typeof replace === 'function' ? replace(match[i]) : replace));\r\n    }\r\n  }\r\n  return message;\r\n}\r\n","let styleBuffer = '';\r\nconst fullTextStorage = {};\r\n\r\nexport default function writeChar(el, char, style){\r\n  // Grab text. We buffer it in storage so we don't have to read from the DOM every iteration.\r\n  let fullText = fullTextStorage[el.id];\r\n  if (!fullText) fullText = fullTextStorage[el.id] = el.innerHTML;\r\n\r\n  fullText = handleChar(fullText, char);\r\n  // But we still write to the DOM every iteration, which can be pretty slow.\r\n  el.innerHTML = fullTextStorage[el.id] = fullText;\r\n\r\n  // Buffer writes to the <style> element so we don't have to paint quite so much.\r\n  styleBuffer += char;\r\n  if (char === ';') {\r\n    style.textContent += styleBuffer;\r\n    styleBuffer = '';\r\n  }\r\n};\r\n\r\nexport function writeSimpleChar(el, char) {\r\n  el.innerHTML += char;\r\n};\r\n\r\nlet openComment = false;\r\nlet openCSSBlock = false;\r\nconst commentRegex = /(\\/\\*(?:[^](?!\\/\\*))*\\*)$/;\r\nconst keyRegex = /([a-zA-Z- ^\\n]*)$/;\r\nconst valueRegex = /([^:]*)$/;\r\nconst selectorRegex = /(.*)$/;\r\nconst pxRegex = /\\dp/;\r\nconst pxRegex2 = /p$/;\r\n\r\nexport function handleChar(fullText, char) {\r\n  if (openComment && char !== '/') {\r\n    // Short-circuit during a comment so we don't highlight inside it.\r\n    fullText += char;\r\n  } else if (char === '/' && openComment === false) {\r\n    openComment = true;\r\n    fullText += char;\r\n  } else if (char === '/' && fullText.slice(-1) === '*' && openComment === true) {\r\n    openComment = false;\r\n    // Unfortunately we can't just open a span and close it, because the browser will helpfully\r\n    // 'fix' it for us, and we'll end up with a single-character span and an empty closing tag.\r\n    fullText = fullText.replace(commentRegex, '<span class=\"comment\">$1/</span>');\r\n  } else if (char === ':' && openCSSBlock === true) {\r\n    fullText = fullText.replace(keyRegex, '<span class=\"key\">$1</span>:');\r\n  } else if (char === ';') {\r\n    fullText = fullText.replace(valueRegex, '<span class=\"value\">$1</span>;');\r\n  } else if (char === '{' && openCSSBlock === false) {\r\n    openCSSBlock = true;\r\n    fullText = fullText.replace(selectorRegex, '<span class=\"selector\">$1</span>{');\r\n  } else if(char === '}' && openCSSBlock === true) {\r\n    openCSSBlock = false;\r\n    fullText += '}'\r\n  } else if (char === 'x' && pxRegex.test(fullText.slice(-2))) {\r\n    fullText = fullText.replace(pxRegex2, '<span class=\"value px\">px</span>');\r\n  } else {\r\n    fullText += char;\r\n  }\r\n  return fullText;\r\n}\r\n","import 'classlist-polyfill';\r\nimport Promise from 'bluebird';\r\nimport Markdown from 'markdown';\r\nconst md = Markdown.markdown.toHTML;\r\nimport workText from 'raw-loader!./work.txt';\r\n// import pgpText from 'raw-loader!./pgp.txt';\r\n// import headerHTML from 'raw-loader!./header.html';\r\nlet styleText = [0, 1, 2].map((i) => require('raw-loader!./styles' + i + '.css').default);\r\nimport preStyles from 'raw-loader!./prestyles.css';\r\nimport replaceURLs from './lib/replaceURLs';\r\nimport {default as writeChar, writeSimpleChar, handleChar} from './lib/writeChar';\r\nimport getPrefix from './lib/getPrefix';\r\n\r\n// Vars that will help us get er done\r\nconst isDev = window.location.hostname === 'localhost';\r\nconst speed = isDev ? 0 : 16;\r\nlet style, styleEl, workEl, pgpEl, skipAnimationEl, pauseEl;\r\nlet animationSkipped = false, done = false, paused = false;\r\nlet browserPrefix;\r\n\r\n// Wait for load to get started.\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n  getBrowserPrefix();\r\n  // populateHeader();\r\n  getEls();\r\n  // createEventHandlers();\r\n  startAnimation();\r\n});\r\n\r\nasync function startAnimation() {\r\n  try {\r\n    await writeTo(styleEl, styleText[0], 0, speed, true, 1);\r\n    await writeTo(workEl, workText, 0, speed, false, 1);\r\n    await writeTo(styleEl, styleText[1], 0, speed, true, 1);\r\n    createWorkBox();\r\n    await Promise.delay(1000);\r\n    await writeTo(styleEl, styleText[2], 0, speed, true, 1);\r\n    // await writeTo(pgpEl, pgpText, 0, speed, false, 32);\r\n    // await writeTo(styleEl, styleText[3], 0, speed, true, 1);\r\n  }\r\n  // Flow control straight from the ghettos of Milwaukee\r\n  catch(e) {\r\n    if (e.message === \"SKIP IT\") {\r\n      surprisinglyShortAttentionSpan();\r\n    } else {\r\n      throw e;\r\n    }\r\n  }\r\n}\r\n\r\n// Skips all the animations.\r\nasync function surprisinglyShortAttentionSpan() {\r\n  if (done) return;\r\n  done = true;\r\n  // pgpEl.innerHTML = pgpText;\r\n  let txt = styleText.join('\\n');\r\n\r\n  // The work-text animations are rough\r\n  style.textContent = \"#work-text * { \" + browserPrefix + \"transition: none; }\";\r\n  style.textContent += txt;\r\n  let styleHTML = \"\";\r\n  for(let i = 0; i < txt.length; i++) {\r\n     styleHTML = handleChar(styleHTML, txt[i]);\r\n  }\r\n  styleEl.innerHTML = styleHTML;\r\n  createWorkBox();\r\n\r\n  // There's a bit of a scroll problem with this thing\r\n  let start = Date.now();\r\n  while(Date.now() - 1000 > start) {\r\n    workEl.scrollTop = Infinity;\r\n    styleEl.scrollTop = pgpEl.scrollTop = Infinity;\r\n    await Promise.delay(16);\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Helpers\r\n */\r\n\r\n const endOfSentence = /[？！。~：]$/\r\n const comma = /\\D[，；、]$/\r\n const endOfBlock = /[^/]\\n\\n$/\r\n\r\nasync function writeTo(el, message, index, interval, mirrorToStyle, charsPerInterval){\r\n  if (animationSkipped) {\r\n    // Lol who needs proper flow control\r\n    throw new Error('SKIP IT');\r\n  }\r\n  // Write a character or multiple characters to the buffer.\r\n  let chars = message.slice(index, index + charsPerInterval);\r\n  index += charsPerInterval;\r\n\r\n  // Ensure we stay scrolled to the bottom.\r\n  el.scrollTop = el.scrollHeight;\r\n\r\n  // If this is going to <style> it's more complex; otherwise, just write.\r\n  if (mirrorToStyle) {\r\n    writeChar(el, chars, style);\r\n  } else {\r\n    writeSimpleChar(el, chars);\r\n  }\r\n\r\n  // Schedule another write.\r\n  if (index < message.length) {\r\n    let thisInterval = interval;\r\n    \r\n    let thisSlice = message.slice(index - 2, index)\r\n    if (comma.test(thisSlice)) {\r\n      thisInterval = interval * 30\r\n    }\r\n    if (endOfSentence.test(thisSlice)) {\r\n      thisInterval = interval * 70\r\n    }\r\n    thisSlice = message.slice(index - 2, index + 1)\r\n    if (endOfBlock.test(thisSlice)) {\r\n      thisInterval = interval * 50\r\n    }\r\n\r\n    do {\r\n      await Promise.delay(thisInterval);\r\n    } while(paused);\r\n\r\n    return writeTo(el, message, index, interval, mirrorToStyle, charsPerInterval);\r\n  }\r\n}\r\n\r\n//\r\n// Older versions of major browsers (like Android) still use prefixes. So we figure out what that prefix is\r\n// and use it.\r\n//\r\nfunction getBrowserPrefix() {\r\n  // Ghetto per-browser prefixing\r\n  browserPrefix = getPrefix(); // could be empty string, which is fine\r\n  styleText = styleText.map(function(text) {\r\n    return text.replace(/-webkit-/g, browserPrefix);\r\n  });\r\n}\r\n\r\n//\r\n// Put els into the module scope.\r\n//\r\nfunction getEls() {\r\n  // We're cheating a bit on styles.\r\n  let preStyleEl = document.createElement('style');\r\n  preStyleEl.textContent = preStyles;\r\n  document.head.insertBefore(preStyleEl, document.getElementsByTagName('style')[0]);\r\n\r\n  // El refs\r\n  style = document.getElementById('style-tag');\r\n  styleEl = document.getElementById('style-text');\r\n  workEl = document.getElementById('work-text');\r\n  pgpEl = document.getElementById('pgp-text');\r\n  skipAnimationEl = document.getElementById('skip-animation');\r\n  pauseEl = document.getElementById('pause-resume');\r\n}\r\n\r\n//\r\n// Create links in header (now footer).\r\n//\r\n// function populateHeader() {\r\n//   let header = document.getElementById('header');\r\n//   header.innerHTML = headerHTML;\r\n// }\r\n\r\n//\r\n// Create basic event handlers for user input.\r\n//\r\nfunction createEventHandlers() {\r\n  // Mirror user edits back to the style element.\r\n  styleEl.addEventListener('input', function() {\r\n    style.textContent = styleEl.textContent;\r\n  });\r\n\r\n  // Skip anim on click to skipAnimation\r\n  skipAnimationEl.addEventListener('click', function(e) {\r\n    e.preventDefault();\r\n    animationSkipped = true;\r\n  });\r\n\r\n  pauseEl.addEventListener('click', function(e) {\r\n    e.preventDefault();\r\n    if (paused) {\r\n      pauseEl.textContent = \"Pause ||\";\r\n      paused = false;\r\n    } else {\r\n      pauseEl.textContent = \"Resume >>\";\r\n      paused = true;\r\n    }\r\n  });\r\n}\r\n\r\n//\r\n// Fire a listener when scrolling the 'work' box.\r\n//\r\nfunction createWorkBox() {\r\n  if (workEl.classList.contains('flipped')) return;\r\n  workEl.innerHTML = '<div class=\"text\">' + replaceURLs(workText) + '</div>' +\r\n                     '<div class=\"md\">' + replaceURLs(md(workText)) + '<div>';\r\n\r\n  workEl.classList.add('flipped');\r\n  workEl.scrollTop = 9999;\r\n\r\n  // flippy floppy\r\n  let flipping = 0;\r\n  require('mouse-wheel')(workEl, async function(dx, dy) {\r\n    if (flipping) return;\r\n    let flipped = workEl.classList.contains('flipped');\r\n    let half = (workEl.scrollHeight - workEl.clientHeight) / 2;\r\n    let pastHalf = flipped ? workEl.scrollTop < half : workEl.scrollTop > half;\r\n\r\n    // If we're past half, flip the el.\r\n    if (pastHalf) {\r\n      workEl.classList.toggle('flipped');\r\n      flipping = true;\r\n      await Promise.delay(500);\r\n      workEl.scrollTop = flipped ? 0 : 9999;\r\n      flipping = false;\r\n    }\r\n\r\n    // Scroll. If we've flipped, flip the scroll direction.\r\n    workEl.scrollTop += (dy * (flipped ? -1 : 1));\r\n  }, true);\r\n}\r\n","// @flow\r\nexport default function generatePrefix(): string {\r\n  // Checking specifically for 'window.document' is for pseudo-browser server-side\r\n  // environments that define 'window' as the global context.\r\n  // E.g. React-rails (see https://github.com/reactjs/react-rails/pull/84)\r\n  if (typeof window === 'undefined' || typeof window.document === 'undefined') return '';\r\n\r\n  const prefixes = ['Moz', 'Webkit', 'O', 'ms'];\r\n  const style = window.document.documentElement.style;\r\n\r\n  if ('transform' in style) {\r\n    return '';\r\n  }\r\n\r\n  for (let i = 0; i < prefixes.length; ++i) {\r\n    if (prefixes[i] + 'Transform' in style) {\r\n      return prefixes[i];\r\n    }\r\n  }\r\n  return '';\r\n}\r\n\r\n","export default \"/* I'm cheating a bit */\\r\\n\\r\\n::-webkit-scrollbar {\\r\\n  width: 0;\\r\\n  height: 0;\\r\\n  color: transparent;\\r\\n}\\r\\n\\r\\nhtml, body {\\r\\n  margin-top: 0;\\r\\n  height: 100%;\\r\\n  overflow: hidden;\\r\\n}\\r\\n\\r\\npre {\\r\\n  font-size: 16px;\\r\\n  font-weight: bold;\\r\\n  overflow: auto;\\r\\n  height: 90%;\\r\\n  width: 100%;\\r\\n  border-radius: 1px; /* Prevents bad clipping in Chrome */\\r\\n}\\r\\n\\r\\n#content {\\r\\n  position: absolute;\\r\\n  top: 0; right: 0; left: 0; bottom: 20px;\\r\\n}\\r\\n\\r\\n#header {\\r\\n  position: absolute;\\r\\n  bottom: 0;\\r\\n  height: 20px;\\r\\n  left: 0;\\r\\n  right: 0;\\r\\n  padding: 0 10px;\\r\\n}\\r\\n\\r\\na:after {\\r\\n  content: '';\\r\\n  padding-right: 5px;\\r\\n  border-right-width: 1px;\\r\\n  border-right-style: solid;\\r\\n  border-color: inherit;\\r\\n}\\r\\n\\r\\na:last-of-type:after {\\r\\n  border: none;\\r\\n}\\r\\n\""],"sourceRoot":""}