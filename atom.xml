<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>tanglijun&#39;s blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://tanglj.cn/"/>
  <updated>2018-11-23T14:23:48.386Z</updated>
  <id>https://tanglj.cn/</id>
  
  <author>
    <name>tanglijun</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>IOS 中 input 输入框的一些怪异行为</title>
    <link href="https://tanglj.cn/2018/11/23/some-quirks-of-ios-input/"/>
    <id>https://tanglj.cn/2018/11/23/some-quirks-of-ios-input/</id>
    <published>2018-11-23T17:26:40.000Z</published>
    <updated>2018-11-23T14:23:48.386Z</updated>
    
    <content type="html"><![CDATA[<p>最近有一些项目在 IOS 系统中出现了一些奇怪的问题，这些问题是关于 &lt;input&gt; 标签的一些怪异行为。</p><a id="more"></a><h1 id="IOS-键盘左上角切换表单元素"><a href="#IOS-键盘左上角切换表单元素" class="headerlink" title="IOS 键盘左上角切换表单元素"></a>IOS 键盘左上角切换表单元素</h1><p>IOS 会自动检测页面的表单元素自动并分配 tabindex 索引让用户可以快速切换表单元素，但这也会造成一些网页开发上的问题。</p><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>页面中存在表单元素</p><p><img src="./form.png" alt="form"></p><p>页面浮层也是一个表单</p><p><img src="./modalbox-focus.png" alt="modalbox-focus"></p><p>这时候点击左上角的 <code>上</code> <code>下</code> 按钮</p><p><img src="./keyboard.png" alt="keyboard"></p><p>产生光标定位到下层表单元素中</p><p><img src="./modalbox.png" alt="modalbox"></p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>经过搜索资料后，得出解决方案，<em>在表单元素上面添加 <code>tabindex=&quot;-1&quot;</code> 属性</em></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">tabindex</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre><p>这样 IOS 左上角的 <code>上</code> <code>下</code> 箭头就被禁用了，也就修复了该问题</p><p><img src="./ios-input-quirks-fixed.png" alt="ios-input-quirks-fixed"></p><h1 id="IOS-禁止输入中文"><a href="#IOS-禁止输入中文" class="headerlink" title="IOS 禁止输入中文"></a>IOS 禁止输入中文</h1><p>我们在做验证码的时候，希望用户只能输入英文和数字，但在 IOS 中并不能很好的实现这个功能。</p><h2 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h2><p>页面中 <code>&lt;input&gt;</code> 设置了 <code>maxlength</code> 限制 4 个字符，<code>oninput</code> 事件中用于移除中文字符，但是在 IOS 中没有效果</p><p><img src="./can-input-chinese.png" alt="can-input-chinese"></p><h2 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h2><p>利用 <code>compositionstart</code>，<code>compositionend</code>，<code>input</code></p><pre class=" language-js"><code class="language-js">inputElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'compositionstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>lock <span class="token operator">=</span> <span class="token boolean">true</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>regExpRule <span class="token operator">=</span> <span class="token regex">/[^0-9a-zA-Z]/g</span><span class="token punctuation">}</span><span class="token punctuation">)</span>inputElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'compositionend'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>lock <span class="token operator">=</span> <span class="token boolean">false</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>regExpRule<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>inputElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>lock<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>regExpRule<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近有一些项目在 IOS 系统中出现了一些奇怪的问题，这些问题是关于 &amp;lt;input&amp;gt; 标签的一些怪异行为。&lt;/p&gt;
    
    </summary>
    
      <category term="html" scheme="https://tanglj.cn/categories/html/"/>
    
    
      <category term="input" scheme="https://tanglj.cn/tags/input/"/>
    
  </entry>
  
  <entry>
    <title>移动端设置了 autofocus 属性的 input 标签无法打开输入法键盘</title>
    <link href="https://tanglj.cn/2018/08/23/fail-to-open-keyboard-with-autofocus-of-input/"/>
    <id>https://tanglj.cn/2018/08/23/fail-to-open-keyboard-with-autofocus-of-input/</id>
    <published>2018-08-23T00:51:54.000Z</published>
    <updated>2018-11-23T14:23:48.286Z</updated>
    
    <content type="html"><![CDATA[<p>众所周知 <code>input</code> 标签有一个 <code>autofocus</code> 属性，用于对 <code>input</code> 标签执行自动获取焦点的行为。但是在移动端，由于移动设备的行为设计，设置了 <code>autofocus</code> 属性的 <code>input</code> 标签并不能如预期的那样自动获取焦点并弹出输入法键盘，在 iphone 手机中甚至无法自动获取焦点。</p><a id="more"></a><h1 id="失败的案例"><a href="#失败的案例" class="headerlink" title="失败的案例"></a>失败的案例</h1><p><img src="./android-wechat-webview.jpg" alt="Android-Wechat-Webview"></p><p>我们可以看到在 Android 中虽然 <code>input</code> 标签自动获取了焦点，但是并没有自动弹出输入框。演示代码如下：</p><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ltr<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width, initial-scale<span class="token punctuation">=</span>1, maximum-scale<span class="token punctuation">=</span>1, user-scalable<span class="token punctuation">=</span>no<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>移动端设置了 autofocus 属性的 input 标签无法打开输入法键盘<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myInput<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>输入密码<span class="token punctuation">"</span></span> <span class="token attr-name">autofocus</span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>我的解决方案是通过用户行为来触发 <code>input</code> 标签的焦点事件，从而正确弹出输入框。</p><p><img src="./success-demo-android-wechat-webview.jpg" alt="success-demo-android-wechat-webview"></p><p>当用户点击 <code>重新输入密码</code> 时即可弹出输入框了。</p><p><img src="./success-demo-android-wechat-webview-2.jpg" alt="success-demo-android-wechat-webview-2"></p><p>演示代码如下：</p><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ltr<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>width<span class="token punctuation">=</span>device-width, initial-scale<span class="token punctuation">=</span>1, maximum-scale<span class="token punctuation">=</span>1, user-scalable<span class="token punctuation">=</span>no<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://res.wx.qq.com/open/libs/weui/1.1.3/weui.min.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>myInput<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>输入密码<span class="token punctuation">"</span></span> <span class="token attr-name">autofocus</span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://res.wx.qq.com/open/libs/weuijs/1.1.4/weui.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token keyword">var</span> myInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myInput'</span><span class="token punctuation">)</span>      weui<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">'只有用户行为才能在 input 元素触发 focus() 事件时调起键盘'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        title<span class="token punctuation">:</span> <span class="token string">'提示：'</span><span class="token punctuation">,</span>        buttons<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token punctuation">{</span>            label<span class="token punctuation">:</span> <span class="token string">'我知道了'</span><span class="token punctuation">,</span>            type<span class="token punctuation">:</span> <span class="token string">'default'</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            label<span class="token punctuation">:</span> <span class="token string">'重新输入密码'</span><span class="token punctuation">,</span>            onClick<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>              myInput<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>          <span class="token punctuation">}</span>        <span class="token punctuation">]</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://stackoverflow.com/questions/23722816/autofocus-text-field-on-mobile-but-no-keyboard" target="_blank" rel="noopener">https://stackoverflow.com/questions/23722816/autofocus-text-field-on-mobile-but-no-keyboard</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;众所周知 &lt;code&gt;input&lt;/code&gt; 标签有一个 &lt;code&gt;autofocus&lt;/code&gt; 属性，用于对 &lt;code&gt;input&lt;/code&gt; 标签执行自动获取焦点的行为。但是在移动端，由于移动设备的行为设计，设置了 &lt;code&gt;autofocus&lt;/code&gt; 属性的 &lt;code&gt;input&lt;/code&gt; 标签并不能如预期的那样自动获取焦点并弹出输入法键盘，在 iphone 手机中甚至无法自动获取焦点。&lt;/p&gt;
    
    </summary>
    
      <category term="html" scheme="https://tanglj.cn/categories/html/"/>
    
    
      <category term="input" scheme="https://tanglj.cn/tags/input/"/>
    
  </entry>
  
  <entry>
    <title>解读 Layabox 示例 10</title>
    <link href="https://tanglj.cn/2018/06/21/read-layabox-demo-10/"/>
    <id>https://tanglj.cn/2018/06/21/read-layabox-demo-10/</id>
    <published>2018-06-21T10:50:32.000Z</published>
    <updated>2018-11-23T14:23:48.334Z</updated>
    
    <content type="html"><![CDATA[<p>本文解读第十个 layabox 引擎示例（<code>切换纹理</code>）</p><a id="more"></a><h1 id="示例效果"><a href="#示例效果" class="headerlink" title="示例效果"></a>示例效果</h1><p><img src="./result.gif" alt="result"></p><h1 id="概念简介"><a href="#概念简介" class="headerlink" title="概念简介"></a>概念简介</h1><p>本示例中的概念均在示例一中描述。<a href="/2018/05/25/read-layabox-demo-1/#概念简介">查看</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>en<span class="token punctuation">'</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>ltr<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>utf-8<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>切换纹理<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.core.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.webgl.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> Sprite <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Sprite        <span class="token keyword">var</span> Stage <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stage        <span class="token keyword">var</span> Texture <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Texture        <span class="token keyword">var</span> Browser <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Browser        <span class="token keyword">var</span> Handler <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Handler        <span class="token keyword">var</span> WebGL <span class="token operator">=</span> Laya<span class="token punctuation">.</span>WebGL        <span class="token keyword">var</span> texture1 <span class="token operator">=</span> <span class="token string">'./res/apes/monkey2.png'</span>        <span class="token keyword">var</span> texture2 <span class="token operator">=</span> <span class="token string">'./res/apes/monkey3.png'</span>        <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">false</span>        <span class="token keyword">var</span> ape        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 不支持WebGL时自动切换至Canvas</span>          Laya<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>Browser<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> Browser<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> WebGL<span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignV <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_MIDDLE          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignH <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_CENTER          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token string">'showall'</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token string">'#232628'</span>          <span class="token comment" spellcheck="true">// 加载资源</span>          Laya<span class="token punctuation">.</span>loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">[</span> texture1<span class="token punctuation">,</span> texture2 <span class="token punctuation">]</span><span class="token punctuation">,</span> Handler<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> onAssetsLoaded<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">onAssetsLoaded</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 实例化一个猩猩</span>          ape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 设置轴心点</span>          ape<span class="token punctuation">.</span><span class="token function">pivot</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 设置坐标位置</span>          ape<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span>Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 添加到舞台中</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>ape<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 显示默认纹理</span>          <span class="token function">switchTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 点击时切换纹理</span>          ape<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> switchTexture<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">function</span> <span class="token function">switchTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">var</span> textureUrl <span class="token operator">=</span> <span class="token punctuation">(</span>flag <span class="token operator">=</span> <span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token operator">?</span> texture1 <span class="token punctuation">:</span> texture2          <span class="token comment" spellcheck="true">// 清空上一次绘制的图像</span>          ape<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 加载新图像</span>          <span class="token keyword">var</span> texture <span class="token operator">=</span> Laya<span class="token punctuation">.</span>loader<span class="token punctuation">.</span><span class="token function">getRes</span><span class="token punctuation">(</span>textureUrl<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 绘制纹理</span>          ape<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawTexture</span><span class="token punctuation">(</span>texture<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 重置绘制图像的宽高</span>          ape<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>texture<span class="token punctuation">.</span>width<span class="token punctuation">,</span> texture<span class="token punctuation">.</span>height<span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.layabox.com" target="_blank" rel="noopener">https://www.layabox.com</a></li><li><a href="https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=SwitchTexture" target="_blank" rel="noopener">https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=SwitchTexture</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文解读第十个 layabox 引擎示例（&lt;code&gt;切换纹理&lt;/code&gt;）&lt;/p&gt;
    
    </summary>
    
      <category term="layabox" scheme="https://tanglj.cn/categories/layabox/"/>
    
    
      <category term="es5" scheme="https://tanglj.cn/tags/es5/"/>
    
  </entry>
  
  <entry>
    <title>解读 Layabox 示例 09</title>
    <link href="https://tanglj.cn/2018/06/21/read-layabox-demo-9/"/>
    <id>https://tanglj.cn/2018/06/21/read-layabox-demo-9/</id>
    <published>2018-06-21T10:38:18.000Z</published>
    <updated>2018-11-23T14:23:48.378Z</updated>
    
    <content type="html"><![CDATA[<p>本文解读第八个 layabox 引擎示例（<code>轴心点</code>）</p><a id="more"></a><h1 id="示例效果"><a href="#示例效果" class="headerlink" title="示例效果"></a>示例效果</h1><p><img src="./result.gif" alt="result"></p><h1 id="概念简介"><a href="#概念简介" class="headerlink" title="概念简介"></a>概念简介</h1><p>本示例中的概念均在示例一中描述。<a href="/2018/05/25/read-layabox-demo-1/#概念简介">查看</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>en<span class="token punctuation">'</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>ltr<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>utf-8<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>轴心点<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.core.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.webgl.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> Sprite <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Sprite        <span class="token keyword">var</span> Stage <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stage        <span class="token keyword">var</span> Browser <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Browser        <span class="token keyword">var</span> WebGL <span class="token operator">=</span> Laya<span class="token punctuation">.</span>WebGL        <span class="token keyword">var</span> sp1<span class="token punctuation">,</span> sp2        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 不支持WebGL时自动切换至Canvas</span>          Laya<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>Browser<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> Browser<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> WebGL<span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignV <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_MIDDLE          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignH <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_CENTER          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token string">'showall'</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token string">'#232628'</span>          <span class="token function">createApes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">createApes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 设置间隔距离 300</span>          <span class="token keyword">var</span> gap <span class="token operator">=</span> <span class="token number">300</span>          <span class="token comment" spellcheck="true">// 加载猩猩 1，并设置轴心点</span>          sp1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          sp1<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'./res/apes/monkey2.png'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>          sp1<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>width <span class="token operator">-</span> gap<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>          sp1<span class="token punctuation">.</span><span class="token function">pivot</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>sp1<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 加载猩猩 2，不设置轴心点，默认为左上角</span>          sp2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          sp2<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'./res/apes/monkey2.png'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>          sp2<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>width <span class="token operator">+</span> gap<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>sp2<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 添加逐帧动画</span>          Laya<span class="token punctuation">.</span>timer<span class="token punctuation">.</span><span class="token function">frameLoop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> animate<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 以轴心点旋转</span>          sp1<span class="token punctuation">.</span>rotation <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span>          <span class="token comment" spellcheck="true">// 以左上角旋转</span>          sp2<span class="token punctuation">.</span>rotation <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.layabox.com" target="_blank" rel="noopener">https://www.layabox.com</a></li><li><a href="https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=Pivot" target="_blank" rel="noopener">https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=Pivot</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文解读第八个 layabox 引擎示例（&lt;code&gt;轴心点&lt;/code&gt;）&lt;/p&gt;
    
    </summary>
    
      <category term="layabox" scheme="https://tanglj.cn/categories/layabox/"/>
    
    
      <category term="es5" scheme="https://tanglj.cn/tags/es5/"/>
    
  </entry>
  
  <entry>
    <title>解读 Layabox 示例 08</title>
    <link href="https://tanglj.cn/2018/06/21/read-layabox-demo-8/"/>
    <id>https://tanglj.cn/2018/06/21/read-layabox-demo-8/</id>
    <published>2018-06-21T01:09:19.000Z</published>
    <updated>2018-11-23T14:23:48.370Z</updated>
    
    <content type="html"><![CDATA[<p>本文解读第八个 layabox 引擎示例（<code>节点控制</code>）</p><a id="more"></a><h1 id="示例效果"><a href="#示例效果" class="headerlink" title="示例效果"></a>示例效果</h1><p><img src="./result.gif" alt="result"></p><h1 id="概念简介"><a href="#概念简介" class="headerlink" title="概念简介"></a>概念简介</h1><p>本示例中的概念均在示例一中描述。<a href="/2018/05/25/read-layabox-demo-1/#概念简介">查看</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>en<span class="token punctuation">'</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>ltr<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>utf-8<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>节点控制<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.core.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.webgl.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> Sprite <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Sprite        <span class="token keyword">var</span> Stage <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stage        <span class="token keyword">var</span> Browser <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Browser        <span class="token keyword">var</span> WebGL <span class="token operator">=</span> Laya<span class="token punctuation">.</span>WebGL        <span class="token keyword">var</span> ape1        <span class="token keyword">var</span> ape2        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 不支持WebGL时自动切换至Canvas</span>          Laya<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>Browser<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> Browser<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> WebGL<span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignV <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_MIDDLE          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignH <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_CENTER          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token string">'showall'</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token string">'#232628'</span>          <span class="token function">createApes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">createApes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 加载两只猩猩</span>          ape1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          ape2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          ape1<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'./res/apes/monkey2.png'</span><span class="token punctuation">)</span>          ape2<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'./res/apes/monkey2.png'</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 设置中心点为 55, 72，即图像大小的 1/2</span>          ape1<span class="token punctuation">.</span><span class="token function">pivot</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span>          ape2<span class="token punctuation">.</span><span class="token function">pivot</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 猩猩 1 放在舞台中间位置</span>          ape1<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span>Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 猩猩 2 放在 x 轴 200，y 轴 0 的位置</span>          ape2<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 猩猩 1 添加到舞台中</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>ape1<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 猩猩 2 添加为猩猩 1 的子集</span>          ape1<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>ape2<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 添加逐帧动画</span>          Laya<span class="token punctuation">.</span>timer<span class="token punctuation">.</span><span class="token function">frameLoop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> animate<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 由于 ape2 是 ape1 的子集，所以 ape1 旋转时 ape2 跟着一起旋转</span>          ape1<span class="token punctuation">.</span>rotation <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span>          <span class="token comment" spellcheck="true">// ape2 旋转不影响 ape1</span>          ape2<span class="token punctuation">.</span>rotation <span class="token operator">-</span><span class="token operator">=</span> <span class="token number">4</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.layabox.com" target="_blank" rel="noopener">https://www.layabox.com</a></li><li><a href="https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=NodeControl" target="_blank" rel="noopener">https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=NodeControl</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文解读第八个 layabox 引擎示例（&lt;code&gt;节点控制&lt;/code&gt;）&lt;/p&gt;
    
    </summary>
    
      <category term="layabox" scheme="https://tanglj.cn/categories/layabox/"/>
    
    
      <category term="es5" scheme="https://tanglj.cn/tags/es5/"/>
    
  </entry>
  
  <entry>
    <title>解读 Layabox 示例 07</title>
    <link href="https://tanglj.cn/2018/06/19/read-layabox-demo-7/"/>
    <id>https://tanglj.cn/2018/06/19/read-layabox-demo-7/</id>
    <published>2018-06-19T14:15:14.000Z</published>
    <updated>2018-11-23T14:23:48.366Z</updated>
    
    <content type="html"><![CDATA[<p>本文解读第七个 layabox 引擎示例（<code>缓存为静态图像</code>）</p><a id="more"></a><h1 id="示例效果"><a href="#示例效果" class="headerlink" title="示例效果"></a>示例效果</h1><p><img src="./result.png" alt="result"></p><h1 id="概念简介"><a href="#概念简介" class="headerlink" title="概念简介"></a>概念简介</h1><h2 id="Text-类"><a href="#Text-类" class="headerlink" title="Text 类"></a>Text 类</h2><p>Text 类用于创建显示对象以显示文本。<a href="https://layaair.ldc.layabox.com/api/?category=Core&amp;class=laya.display.Text" target="_blank" rel="noopener">API 详情</a></p><h2 id="Stat-类"><a href="#Stat-类" class="headerlink" title="Stat 类"></a>Stat 类</h2><p>Stat 类是一个性能统计面板，可以实时更新相关的性能参数。<a href="https://layaair.ldc.layabox.com/api/?category=Core&amp;class=laya.utils.Stat" target="_blank" rel="noopener">API 详情</a></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>其余概念均在示例一中描述。<a href="/2018/05/25/read-layabox-demo-1/#概念简介">查看</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>en<span class="token punctuation">'</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>ltr<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>utf-8<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>缓存为静态图像<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.core.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.webgl.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> Sprite <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Sprite        <span class="token keyword">var</span> Stage <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stage        <span class="token keyword">var</span> Text <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Text        <span class="token keyword">var</span> Stat <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stat        <span class="token keyword">var</span> WebGL <span class="token operator">=</span> Laya<span class="token punctuation">.</span>WebGL        <span class="token keyword">var</span> sp        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 不支持WebGL时自动切换至Canvas</span>          Laya<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span> WebGL<span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignV <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_MIDDLE          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignH <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_CENTER          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token string">'showall'</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token string">'#232628'</span>          <span class="token comment" spellcheck="true">// 显示性能统计信息</span>          Stat<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">var</span> textBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 随机摆放 1000 个文本</span>          <span class="token keyword">var</span> text          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// 设置文本字体大小为 20 px</span>            text<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token number">20</span>            <span class="token comment" spellcheck="true">// 设置文本内容为随机整数</span>            text<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// 设置文本旋转角度为随机角度</span>            text<span class="token punctuation">.</span>rotation <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">360</span>            <span class="token comment" spellcheck="true">// 设置文本颜色</span>            text<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'#CCCCCC'</span>            text<span class="token punctuation">.</span>x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>width            text<span class="token punctuation">.</span>y <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>height            textBox<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span>          <span class="token punctuation">}</span>          <span class="token comment" spellcheck="true">// 缓存为静态图像</span>          textBox<span class="token punctuation">.</span>cacheAsBitmap <span class="token operator">=</span> <span class="token boolean">true</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>textBox<span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.layabox.com" target="_blank" rel="noopener">https://www.layabox.com</a></li><li><a href="https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=Cache" target="_blank" rel="noopener">https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=Cache</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文解读第七个 layabox 引擎示例（&lt;code&gt;缓存为静态图像&lt;/code&gt;）&lt;/p&gt;
    
    </summary>
    
      <category term="layabox" scheme="https://tanglj.cn/categories/layabox/"/>
    
    
      <category term="es5" scheme="https://tanglj.cn/tags/es5/"/>
    
  </entry>
  
  <entry>
    <title>解读 Layabox 示例 06</title>
    <link href="https://tanglj.cn/2018/06/14/read-layabox-demo-6/"/>
    <id>https://tanglj.cn/2018/06/14/read-layabox-demo-6/</id>
    <published>2018-06-14T23:46:23.000Z</published>
    <updated>2018-11-23T14:23:48.366Z</updated>
    
    <content type="html"><![CDATA[<p>本文解读第六个 layabox 引擎示例（<code>绘制各种形状</code>）</p><a id="more"></a><h1 id="示例效果"><a href="#示例效果" class="headerlink" title="示例效果"></a>示例效果</h1><p><img src="./result.png" alt="result"></p><h1 id="概念简介"><a href="#概念简介" class="headerlink" title="概念简介"></a>概念简介</h1><p>本示例中的概念均在示例一中描述。<a href="/2018/05/25/read-layabox-demo-1/#概念简介">查看</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>en<span class="token punctuation">'</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>ltr<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>utf-8<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>遮罩-绘制各种形状<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.core.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.webgl.js<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> Sprite <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Sprite        <span class="token keyword">var</span> Stage <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stage        <span class="token keyword">var</span> WebGL <span class="token operator">=</span> Laya<span class="token punctuation">.</span>WebGL        <span class="token keyword">var</span> sp        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 不支持WebGL时自动切换至Canvas</span>          Laya<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token number">740</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> WebGL<span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignV <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_MIDDLE          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignH <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_CENTER          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token string">'showall'</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token string">'#232628'</span>          <span class="token function">drawSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">drawSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          sp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 画线</span>          sp<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">146</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token string">'#ff0000'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 画连续直线</span>          sp<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawLines</span><span class="token punctuation">(</span><span class="token number">176</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">39</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">156</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'#ff0000'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 画曲线</span>          sp<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawCurves</span><span class="token punctuation">(</span><span class="token number">352</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">39</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">117</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">136</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">156</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'#ff0000'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 画矩形</span>          sp<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">166</span><span class="token punctuation">,</span> <span class="token number">166</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token string">'#ffff00'</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 画多边形</span>          sp<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawPoly</span><span class="token punctuation">(</span><span class="token number">264</span><span class="token punctuation">,</span> <span class="token number">166</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">78.48</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">93.48</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">18.48</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'#ffff00'</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 画三角形</span>          sp<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawPoly</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">166</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'#ffff00'</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 画圆</span>          sp<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawCircle</span><span class="token punctuation">(</span><span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">332</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">'#00ffff'</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 画扇形</span>          sp<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawPie</span><span class="token punctuation">(</span><span class="token number">240</span><span class="token punctuation">,</span> <span class="token number">290</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">'#00ffff'</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 绘制圆角矩形，自定义路径</span>          sp<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawPath</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">310</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span> <span class="token string">'moveTo'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token punctuation">[</span> <span class="token string">'lineTo'</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token punctuation">[</span> <span class="token string">'arcTo'</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token punctuation">[</span> <span class="token string">'lineTo'</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">55</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token punctuation">[</span> <span class="token string">'arcTo'</span><span class="token punctuation">,</span> <span class="token number">110</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token punctuation">[</span> <span class="token string">'lineTo'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">60</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token punctuation">[</span> <span class="token string">'arcTo'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token punctuation">[</span> <span class="token string">'lineTo'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token punctuation">[</span> <span class="token string">'arcTo'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token punctuation">[</span> <span class="token string">'closePath'</span> <span class="token punctuation">]</span>          <span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token punctuation">{</span>            fillStyle<span class="token punctuation">:</span> <span class="token string">'#00ffff'</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.layabox.com" target="_blank" rel="noopener">https://www.layabox.com</a></li><li><a href="https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=DrawShapes" target="_blank" rel="noopener">https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=DrawShapes</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文解读第六个 layabox 引擎示例（&lt;code&gt;绘制各种形状&lt;/code&gt;）&lt;/p&gt;
    
    </summary>
    
      <category term="layabox" scheme="https://tanglj.cn/categories/layabox/"/>
    
    
      <category term="es5" scheme="https://tanglj.cn/tags/es5/"/>
    
  </entry>
  
  <entry>
    <title>Fedora 系统中安装 travis</title>
    <link href="https://tanglj.cn/2018/06/13/install-travis-on-fedora/"/>
    <id>https://tanglj.cn/2018/06/13/install-travis-on-fedora/</id>
    <published>2018-06-13T00:35:09.000Z</published>
    <updated>2018-11-23T14:23:48.306Z</updated>
    
    <content type="html"><![CDATA[<p>在 fedora 系统中安装 travis-cli 时报错，本文记录下解决方案</p><a id="more"></a><h1 id="安装-ruby"><a href="#安装-ruby" class="headerlink" title="安装 ruby"></a>安装 ruby</h1><p>根据官方文档说明，安装 travis 需要安装 ruby，ruby-devel</p><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> dnf <span class="token function">install</span> -y ruby ruby-develruby -v</code></pre><h1 id="安装-travis"><a href="#安装-travis" class="headerlink" title="安装 travis"></a>安装 travis</h1><p>根据官方文档安装 travis</p><pre class=" language-bash"><code class="language-bash">gem <span class="token function">install</span> travis -v 1.8.8 --no-rdoc --no-ri</code></pre><p>这时候会报一个关于 <a href="https://github.com/travis-ci/travis.rb/issues/558" target="_blank" rel="noopener"><code>Failed to build gem native extension</code></a> 的错误。</p><pre class=" language-bash"><code class="language-bash">Building native extensions. This could take a while<span class="token punctuation">..</span>.ERROR:  Error installing travis:ERROR: Failed to build gem native extension.<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span></code></pre><p>我们通过安装 <code>libffi-devel</code> 和 <code>redhat-rpm-config</code> 来解决这个问题</p><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> dnf <span class="token function">install</span> libffi-devel redhat-rpm-config</code></pre><p>再次安装 travis，结果如下</p><pre class=" language-bash"><code class="language-bash">gem <span class="token function">install</span> travis -v 1.8.8 --no-rdoc --no-riFetching: travis-1.8.8.gem <span class="token punctuation">(</span>100%<span class="token punctuation">)</span>Successfully installed travis-1.8.81 gem installed</code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://github.com/travis-ci/travis.rb/issues/602" target="_blank" rel="noopener">https://github.com/travis-ci/travis.rb/issues/602</a></li><li><a href="https://github.com/travis-ci/travis.rb/issues/558" target="_blank" rel="noopener">https://github.com/travis-ci/travis.rb/issues/558</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在 fedora 系统中安装 travis-cli 时报错，本文记录下解决方案&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="https://tanglj.cn/categories/linux/"/>
    
    
      <category term="fedora" scheme="https://tanglj.cn/tags/fedora/"/>
    
  </entry>
  
  <entry>
    <title>解读 Layabox 示例 05</title>
    <link href="https://tanglj.cn/2018/06/09/read-layabox-demo-5/"/>
    <id>https://tanglj.cn/2018/06/09/read-layabox-demo-5/</id>
    <published>2018-06-09T09:46:55.000Z</published>
    <updated>2018-11-23T14:23:48.350Z</updated>
    
    <content type="html"><![CDATA[<p>本文解读第五个 layabox 引擎示例（<code>遮罩放大镜</code>）</p><a id="more"></a><h1 id="示例效果"><a href="#示例效果" class="headerlink" title="示例效果"></a>示例效果</h1><p><img src="./result.gif" alt="result"></p><h1 id="概念简介"><a href="#概念简介" class="headerlink" title="概念简介"></a>概念简介</h1><p>本示例中的概念均在示例一中描述。<a href="/2018/05/25/read-layabox-demo-1/#概念简介">查看</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ltr<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>遮罩-放大镜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.core.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.webgl.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> Sprite <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Sprite        <span class="token keyword">var</span> Stage <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stage        <span class="token keyword">var</span> Browser <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Browser        <span class="token keyword">var</span> Handler <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Handler        <span class="token keyword">var</span> WebGL <span class="token operator">=</span> Laya<span class="token punctuation">.</span>WebGL        <span class="token keyword">var</span> maskSp        <span class="token keyword">var</span> bg2        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 不支持WebGL时自动切换至Canvas</span>          Laya<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token number">1136</span><span class="token punctuation">,</span> <span class="token number">640</span><span class="token punctuation">,</span> WebGL<span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignV <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_MIDDLE          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignH <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_CENTER          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token string">"showall"</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token string">"#232628"</span>          <span class="token comment" spellcheck="true">// 加载背景</span>          Laya<span class="token punctuation">.</span>loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'./res/bg2.png'</span><span class="token punctuation">,</span> Handler<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> setup<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 定义背景实例</span>          <span class="token keyword">var</span> bg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 加载背景图片</span>          bg<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'./res/bg2.png'</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 添加背景到舞台中</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 定义背景 2 实例</span>          bg2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 加载背景图片</span>          bg2<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'./res/bg2.png'</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 添加背景 2 到舞台中</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>bg2<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 设置背景 2 的比例</span>          bg2<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 创建mask</span>          maskSp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 加载 mask 图片</span>          maskSp<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'./res/mask.png'</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 设置 maskSp 中心点（mask.png 100 * 100）</span>          maskSp<span class="token punctuation">.</span><span class="token function">pivot</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 设置 bg2 的 mask 遮罩为 maskSp</span>          <span class="token comment" spellcheck="true">// mask 的详细介绍：https://layaair.ldc.layabox.com/api/?category=Core&amp;class=laya.display.Sprite#mask</span>          bg2<span class="token punctuation">.</span>mask <span class="token operator">=</span> maskSp          <span class="token comment" spellcheck="true">// 监听舞台的 mousemove 事件</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> onMouseMove<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">function</span> <span class="token function">onMouseMove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 设置 bg2 坐标，偏移基数为 （bg2 scale 基数 - 1）即 (3 - 1) = 2</span>          bg2<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token operator">-</span>Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>mouseX <span class="token operator">*</span> <span class="token number">2</span>          bg2<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token operator">-</span>Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>mouseY <span class="token operator">*</span> <span class="token number">2</span>          <span class="token comment" spellcheck="true">// 设置遮罩坐标</span>          maskSp<span class="token punctuation">.</span>x <span class="token operator">=</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>mouseX          maskSp<span class="token punctuation">.</span>y <span class="token operator">=</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>mouseY        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.layabox.com" target="_blank" rel="noopener">https://www.layabox.com</a></li><li><a href="https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=MagnifyingGlass" target="_blank" rel="noopener">https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=MagnifyingGlass</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文解读第五个 layabox 引擎示例（&lt;code&gt;遮罩放大镜&lt;/code&gt;）&lt;/p&gt;
    
    </summary>
    
      <category term="layabox" scheme="https://tanglj.cn/categories/layabox/"/>
    
    
      <category term="es5" scheme="https://tanglj.cn/tags/es5/"/>
    
  </entry>
  
  <entry>
    <title>解读 Layabox 示例 04</title>
    <link href="https://tanglj.cn/2018/06/09/read-layabox-demo-4/"/>
    <id>https://tanglj.cn/2018/06/09/read-layabox-demo-4/</id>
    <published>2018-06-09T09:46:50.000Z</published>
    <updated>2018-11-23T14:23:48.350Z</updated>
    
    <content type="html"><![CDATA[<p>本文记录第四个 layabox 引擎示例（<code>根据数据绘制路径</code>）</p><a id="more"></a><h1 id="示例效果"><a href="#示例效果" class="headerlink" title="示例效果"></a>示例效果</h1><p><img src="./result.gif" alt="result"></p><h1 id="概念简介"><a href="#概念简介" class="headerlink" title="概念简介"></a>概念简介</h1><p>本示例中的概念均在示例一中描述。<a href="/2018/05/25/read-layabox-demo-1/#概念简介">查看</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ltr<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.core.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.webgl.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> Sprite  <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Sprite        <span class="token keyword">var</span> Stage   <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stage        <span class="token keyword">var</span> Browser <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Browser        <span class="token keyword">var</span> WebGL   <span class="token operator">=</span> Laya<span class="token punctuation">.</span>WebGL        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 不支持WebGL时自动切换至Canvas</span>          Laya<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>Browser<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> Browser<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> WebGL<span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignV <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_MIDDLE          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignH <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_CENTER          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token string">"showall"</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token string">"#232628"</span>          <span class="token function">drawPentagram</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">drawPentagram</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 创建图形实例</span>          <span class="token keyword">var</span> canvas <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 把图形添加到舞台中</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 定义路径数据</span>          <span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token comment" spellcheck="true">// 添加路径坐标集合</span>          path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">130</span><span class="token punctuation">)</span>          path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">33</span><span class="token punctuation">)</span>          path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">)</span>          path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span>          path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">)</span>          path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">73</span><span class="token punctuation">)</span>          path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">130</span><span class="token punctuation">)</span>          path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span>          path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">)</span>          path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">33</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 从舞台中心点，绘制多边形（五角星）</span>          <span class="token comment" spellcheck="true">// drawPoly 方法详情：https://layaair.ldc.layabox.com/api/?category=Core&amp;class=laya.display.Graphics#drawPoly()</span>          canvas<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawPoly</span><span class="token punctuation">(</span>Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token string">'#FF7F50'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.layabox.com" target="_blank" rel="noopener">https://www.layabox.com</a></li><li><a href="https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=DrawPath" target="_blank" rel="noopener">https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=DrawPath</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文记录第四个 layabox 引擎示例（&lt;code&gt;根据数据绘制路径&lt;/code&gt;）&lt;/p&gt;
    
    </summary>
    
      <category term="layabox" scheme="https://tanglj.cn/categories/layabox/"/>
    
    
      <category term="es5" scheme="https://tanglj.cn/tags/es5/"/>
    
  </entry>
  
  <entry>
    <title>解读 Layabox 示例 03</title>
    <link href="https://tanglj.cn/2018/06/04/read-layabox-demo-3/"/>
    <id>https://tanglj.cn/2018/06/04/read-layabox-demo-3/</id>
    <published>2018-06-04T00:19:11.000Z</published>
    <updated>2018-11-23T14:23:48.346Z</updated>
    
    <content type="html"><![CDATA[<p>本文记录第三个引擎示例展示旋转缩放的应用。</p><a id="more"></a><h1 id="示例效果"><a href="#示例效果" class="headerlink" title="示例效果"></a>示例效果</h1><p><img src="./result.gif" alt="result"></p><h1 id="概念简介"><a href="#概念简介" class="headerlink" title="概念简介"></a>概念简介</h1><h2 id="Event-类"><a href="#Event-类" class="headerlink" title="Event 类"></a>Event 类</h2><p>Event 是事件类型的集合。<a href="https://layaair.ldc.layabox.com/api/?category=Core&amp;class=laya.events.Event" target="_blank" rel="noopener">API 详情</a></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>其余概念均在示例一中描述。<a href="/2018/05/25/read-layabox-demo-1/#概念简介">查看</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ltr<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.core.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.webgl.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> Sprite  <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Sprite<span class="token punctuation">;</span>        <span class="token keyword">var</span> Stage   <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stage<span class="token punctuation">;</span>        <span class="token keyword">var</span> Event   <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Event<span class="token punctuation">;</span>        <span class="token keyword">var</span> Browser <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Browser<span class="token punctuation">;</span>        <span class="token keyword">var</span> WebGL   <span class="token operator">=</span> Laya<span class="token punctuation">.</span>WebGL<span class="token punctuation">;</span>        <span class="token keyword">var</span> ape<span class="token punctuation">;</span>        <span class="token keyword">var</span> scaleDelta <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 不支持 WebGL 时自动切换至 Canvas</span>          Laya<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>Browser<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> Browser<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> WebGL<span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignV <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_MIDDLE          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignH <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_CENTER          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token string">'showall'</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token string">'#232628'</span>          <span class="token function">createApe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">createApe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          ape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 加载图片</span>          ape<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'./res/apes/monkey2.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 添加图形到舞台中</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>ape<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 设置中心点 (monkey2.png 110 * 145)</span>          ape<span class="token punctuation">.</span><span class="token function">pivot</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 设置图形的 x 坐标</span>          ape<span class="token punctuation">.</span>x <span class="token operator">=</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 设置图形的 y 坐标</span>          ape<span class="token punctuation">.</span>y <span class="token operator">=</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 设置没 1 帧的动画</span>          Laya<span class="token punctuation">.</span>timer<span class="token punctuation">.</span><span class="token function">frameLoop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> animate<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 旋转角度增加 2 度</span>          ape<span class="token punctuation">.</span>rotation <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 设置心跳缩放比例</span>          scaleDelta <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">0.02</span><span class="token punctuation">;</span>          <span class="token keyword">var</span> scaleValue <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>scaleDelta<span class="token punctuation">)</span><span class="token punctuation">;</span>          ape<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>scaleValue<span class="token punctuation">,</span> scaleValue<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.layabox.com" target="_blank" rel="noopener">https://www.layabox.com</a></li><li><a href="https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=RoateAndScale" target="_blank" rel="noopener">https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=RoateAndScale</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文记录第三个引擎示例展示旋转缩放的应用。&lt;/p&gt;
    
    </summary>
    
      <category term="layabox" scheme="https://tanglj.cn/categories/layabox/"/>
    
    
      <category term="es5" scheme="https://tanglj.cn/tags/es5/"/>
    
  </entry>
  
  <entry>
    <title>解读 Layabox 示例 02</title>
    <link href="https://tanglj.cn/2018/05/30/read-layabox-demo-2/"/>
    <id>https://tanglj.cn/2018/05/30/read-layabox-demo-2/</id>
    <published>2018-05-30T12:11:17.000Z</published>
    <updated>2018-11-23T14:23:48.334Z</updated>
    
    <content type="html"><![CDATA[<p>第二个引擎示例展示容器的应用。</p><a id="more"></a><h1 id="示例效果"><a href="#示例效果" class="headerlink" title="示例效果"></a>示例效果</h1><p><img src="./result.gif" alt="result"></p><h1 id="概念简介"><a href="#概念简介" class="headerlink" title="概念简介"></a>概念简介</h1><p>本示例中的概念均在示例一中描述。<a href="/2018/05/25/read-layabox-demo-1/#概念简介">查看</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ltr<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.core.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.webgl.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> Sprite <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Sprite        <span class="token keyword">var</span> Stage <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stage        <span class="token keyword">var</span> Event <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Event        <span class="token keyword">var</span> Browser <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Browser        <span class="token keyword">var</span> WebGL <span class="token operator">=</span> Laya<span class="token punctuation">.</span>WebGL        <span class="token comment" spellcheck="true">// 该容器用于装载 4 张猩猩图片</span>        <span class="token keyword">var</span> apesCtn        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 不支持 WebGL 时自动切换至 Canvas</span>          Laya<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>Browser<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> Browser<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> WebGL<span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignV <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_MIDDLE          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignH <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_CENTER          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token string">'showall'</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token string">'#232628'</span>          <span class="token function">createApes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">createApes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 每只猩猩距离中心点 150 像素</span>          <span class="token keyword">var</span> layoutRadius <span class="token operator">=</span> <span class="token number">150</span>          <span class="token keyword">var</span> radianUnit <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">/</span> <span class="token number">2</span>          apesCtn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>apesCtn<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 添加 4 张猩猩图片</span>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">var</span> ape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            ape<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'./res/apes/monkey'</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">'.png'</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// 设置轴心点</span>            ape<span class="token punctuation">.</span><span class="token function">pivot</span><span class="token punctuation">(</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// 以圆周排列猩猩</span>            ape<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">cos</span><span class="token punctuation">(</span>radianUnit <span class="token operator">*</span> i<span class="token punctuation">)</span> <span class="token operator">*</span> layoutRadius<span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>radianUnit <span class="token operator">*</span> i<span class="token punctuation">)</span> <span class="token operator">*</span> layoutRadius<span class="token punctuation">)</span>            apesCtn<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>ape<span class="token punctuation">)</span>          <span class="token punctuation">}</span>          <span class="token comment" spellcheck="true">// 设置猩猩的位置在舞台中央</span>          apesCtn<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span>Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 每 1 帧执行动画 animate</span>          Laya<span class="token punctuation">.</span>timer<span class="token punctuation">.</span><span class="token function">frameLoop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> animate<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 旋转角度 + 1</span>          apesCtn<span class="token punctuation">.</span>rotation <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.layabox.com" target="_blank" rel="noopener">https://www.layabox.com</a></li><li><a href="https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=Container" target="_blank" rel="noopener">https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=Container</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;第二个引擎示例展示容器的应用。&lt;/p&gt;
    
    </summary>
    
      <category term="layabox" scheme="https://tanglj.cn/categories/layabox/"/>
    
    
      <category term="es5" scheme="https://tanglj.cn/tags/es5/"/>
    
  </entry>
  
  <entry>
    <title>解读 Layabox 示例 01</title>
    <link href="https://tanglj.cn/2018/05/25/read-layabox-demo-1/"/>
    <id>https://tanglj.cn/2018/05/25/read-layabox-demo-1/</id>
    <published>2018-05-25T17:31:47.000Z</published>
    <updated>2018-11-23T14:23:48.334Z</updated>
    
    <content type="html"><![CDATA[<p>一次偶然的机会发现了 <a href="https://www.layabox.com/" target="_blank" rel="noopener">Layabox</a>，着实令我眼前一亮，想了想决定入这个坑。</p><a id="more"></a><h1 id="示例效果"><a href="#示例效果" class="headerlink" title="示例效果"></a>示例效果</h1><p>第一个示例使用 Sprite 显示图片，实现下面的效果：</p><p><img src="./result.png" alt="result.png"></p><h1 id="概念简介"><a href="#概念简介" class="headerlink" title="概念简介"></a>概念简介</h1><h2 id="Sprite-类"><a href="#Sprite-类" class="headerlink" title="Sprite 类"></a>Sprite 类</h2><p>Sprite 是基本的显示图形的显示列表节点。<a href="https://layaair.ldc.layabox.com/api/?category=Core&amp;class=laya.display.Sprite" target="_blank" rel="noopener">API 详情</a></p><h2 id="Stage-类"><a href="#Stage-类" class="headerlink" title="Stage 类"></a>Stage 类</h2><p>Stage 是舞台类，显示列表的根结点，所有显示对象都在舞台上显示。<a href="https://layaair.ldc.layabox.com/api/?category=Core&amp;class=laya.display.Stage" target="_blank" rel="noopener">API 详情</a></p><h2 id="Texture-类"><a href="#Texture-类" class="headerlink" title="Texture 类"></a>Texture 类</h2><p>Texture 是一个纹理处理类。<a href="https://layaair.ldc.layabox.com/api/?category=Core&amp;class=laya.resource.Texture" target="_blank" rel="noopener">API 详情</a></p><h2 id="Browser-类"><a href="#Browser-类" class="headerlink" title="Browser 类"></a>Browser 类</h2><p>Browser 是浏览器代理类。<a href="https://layaair.ldc.layabox.com/api/?category=Core&amp;class=laya.utils.Browser" target="_blank" rel="noopener">API 详情</a></p><h2 id="Handler-类"><a href="#Handler-类" class="headerlink" title="Handler 类"></a>Handler 类</h2><p>Handler 是事件处理器类。<a href="https://layaair.ldc.layabox.com/api/?category=Core&amp;class=laya.utils.Handler" target="_blank" rel="noopener">API 详情</a></p><h1 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name">dir</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ltr<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.core.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./LayaAirJS_1.7.19.1_beta/js/libs/laya.webgl.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> Sprite <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Sprite        <span class="token keyword">var</span> Stage <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Stage        <span class="token keyword">var</span> Texture <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Texture        <span class="token keyword">var</span> Browser <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Browser        <span class="token keyword">var</span> Handler <span class="token operator">=</span> Laya<span class="token punctuation">.</span>Handler        <span class="token keyword">var</span> WebGL <span class="token operator">=</span> Laya<span class="token punctuation">.</span>WebGL        <span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 初始化舞台，不支持 WebGl 时自动切换至 Canvas</span>          Laya<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>Browser<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> Browser<span class="token punctuation">.</span>clientHeight<span class="token punctuation">,</span> WebGL<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 设置画布垂直对齐方式</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignV <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_MIDDLE          <span class="token comment" spellcheck="true">// 设置画布水平对齐方式</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>alignH <span class="token operator">=</span> Stage<span class="token punctuation">.</span>ALIGN_CENTER          <span class="token comment" spellcheck="true">// 设置缩放模式</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>scaleMode <span class="token operator">=</span> <span class="token string">'showall'</span>          <span class="token comment" spellcheck="true">// 设置舞台的背景颜色</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span>bgColor <span class="token operator">=</span> <span class="token string">'#232628'</span>          <span class="token function">showApe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">showApe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment" spellcheck="true">// 实例化图形列表节点</span>          <span class="token keyword">var</span> ape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 把图形列表节点添加到舞台中</span>          Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>ape<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 方法1：使用 loadImage 加载图片</span>          ape<span class="token punctuation">.</span><span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token string">'./res/apes/monkey3.png'</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">// 方法2：使用 drawTexture</span>          <span class="token keyword">var</span> monkey2 <span class="token operator">=</span> <span class="token string">'./res/apes/monkey2.png'</span>          <span class="token comment" spellcheck="true">// 加载图片</span>          Laya<span class="token punctuation">.</span>loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>monkey2<span class="token punctuation">,</span> Handler<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// 获取指定地址资源</span>            <span class="token keyword">var</span> t <span class="token operator">=</span> Laya<span class="token punctuation">.</span>loader<span class="token punctuation">.</span><span class="token function">getRes</span><span class="token punctuation">(</span>monkey2<span class="token punctuation">)</span>            <span class="token keyword">var</span> ape <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sprite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// 绘制纹理</span>            ape<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span><span class="token function">drawTexture</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>            Laya<span class="token punctuation">.</span>stage<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>ape<span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">// 设置坐标位置</span>            ape<span class="token punctuation">.</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.layabox.com/" target="_blank" rel="noopener">https://www.layabox.com/</a></li><li><a href="https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=DisplayImage" target="_blank" rel="noopener">https://layaair.ldc.layabox.com/demo/?category=2d&amp;group=Sprite&amp;name=DisplayImage</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一次偶然的机会发现了 &lt;a href=&quot;https://www.layabox.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Layabox&lt;/a&gt;，着实令我眼前一亮，想了想决定入这个坑。&lt;/p&gt;
    
    </summary>
    
      <category term="layabox" scheme="https://tanglj.cn/categories/layabox/"/>
    
    
      <category term="es5" scheme="https://tanglj.cn/tags/es5/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript 文件分块上传</title>
    <link href="https://tanglj.cn/2018/05/17/slice-file-for-upload/"/>
    <id>https://tanglj.cn/2018/05/17/slice-file-for-upload/</id>
    <published>2018-05-17T17:03:45.000Z</published>
    <updated>2018-11-23T14:23:48.386Z</updated>
    
    <content type="html"><![CDATA[<p>本文记录 JavaScript 如何对大文件进行分块上传。</p><a id="more"></a><h1 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h1><p><code>Blob</code> 对象提供了 <code>slice</code> 方法，用于创建一个包含源 <code>Blob</code> 的指定字节范围内的数据的新 <code>Blob</code> 对象。<code>File</code> 接口基于 <code>Blob</code>，继承了该方法。利用此方法，我们就可以对大文件进行分块处理。</p><h1 id="演示代码"><a href="#演示代码" class="headerlink" title="演示代码"></a>演示代码</h1><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 设置分块大小</span><span class="token keyword">var</span> chunkSize <span class="token operator">=</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token comment" spellcheck="true">// 计算总分块</span><span class="token keyword">var</span> totalChunk <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>filesize <span class="token operator">/</span> chunkSize<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// 当前分块索引</span><span class="token keyword">var</span> chunkIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token comment" spellcheck="true">// 分块起始值</span><span class="token keyword">var</span> chunkStart <span class="token operator">=</span> <span class="token number">0</span><span class="token comment" spellcheck="true">// 分块结束值</span><span class="token keyword">var</span> chunkEnd <span class="token operator">=</span> <span class="token number">0</span><span class="token comment" spellcheck="true">// 迭代</span><span class="token keyword">while</span> <span class="token punctuation">(</span>chunkStart <span class="token operator">&lt;</span> filesize<span class="token punctuation">)</span> <span class="token punctuation">{</span>  chunkEnd <span class="token operator">=</span> chunkStart <span class="token operator">+</span> chunkSize  <span class="token keyword">if</span> <span class="token punctuation">(</span>chunkEnd <span class="token operator">></span> filesize<span class="token punctuation">)</span> <span class="token punctuation">{</span>    chunkEnd <span class="token operator">=</span> filesize  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// 在这里分块处理 :)</span>  file<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>chunkStart<span class="token punctuation">,</span> chunkEnd<span class="token punctuation">)</span>  chunkStart <span class="token operator">=</span> chunkEnd  chunkIndex <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span>  <span class="token comment" spellcheck="true">// 最后一块</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>chunkIndex <span class="token operator">>=</span> totalChunk<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 操作</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="http://tuobaye.com/2017/12/01/谈一谈大文件上传——前台分片和后台合并" target="_blank" rel="noopener">http://tuobaye.com/2017/12/01/谈一谈大文件上传——前台分片和后台合并</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文记录 JavaScript 如何对大文件进行分块上传。&lt;/p&gt;
    
    </summary>
    
      <category term="javascript" scheme="https://tanglj.cn/categories/javascript/"/>
    
    
      <category term="ES5" scheme="https://tanglj.cn/tags/ES5/"/>
    
  </entry>
  
  <entry>
    <title>使用 Adobe Illustrator 创建 svg 复合路径</title>
    <link href="https://tanglj.cn/2018/05/14/use-adobe-illustrator-for-compound-svg-path/"/>
    <id>https://tanglj.cn/2018/05/14/use-adobe-illustrator-for-compound-svg-path/</id>
    <published>2018-05-14T14:10:30.000Z</published>
    <updated>2018-11-23T14:23:48.390Z</updated>
    
    <content type="html"><![CDATA[<p>在网页设计中，我们经常会用到 <code>svg</code> 图标，本文记录下在制作 <code>svg</code> 时如何使用复合路径。</p><a id="more"></a><h1 id="原文件"><a href="#原文件" class="headerlink" title="原文件"></a>原文件</h1><pre class=" language-svg"><code class="language-svg"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token comment" spellcheck="true">&lt;!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.1<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Layer_1<span class="token punctuation">"</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2000/svg<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xlink</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/1999/xlink<span class="token punctuation">"</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0px<span class="token punctuation">"</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0px<span class="token punctuation">"</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0 0 48 48<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">enable-background</span><span class="token punctuation">:</span>new <span class="token number">0</span> <span class="token number">0</span> <span class="token number">48</span> <span class="token number">48</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xml:</span>space</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>preserve<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">  <span class="token selector"><span class="token class">.st0</span></span><span class="token punctuation">{</span><span class="token property">fill</span><span class="token punctuation">:</span><span class="token hexcode">#FFFFFF</span><span class="token punctuation">;</span><span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>M6.4,3.7C6,3.8,5.3,4.3,4.8,4.7C4.4,5,3.8,6,3.7,6.5c-0.2,0.7-0.2,33.9,0,34.4c0.4,1,1.7,2.3,2.6,2.6c0.4,0.2,35,0.2,35.5,0c0.9-0.3,2.3-1.7,2.6-2.6c0.1-0.3,0.1-3.5,0.1-17.2c0-11,0-16.9-0.1-17.2c-0.1-0.2-0.3-0.6-0.6-1c-0.4-0.6-0.6-0.8-1.2-1.2c-0.4-0.3-0.9-0.5-1.1-0.6C41.4,3.6,33.9,3.6,24,3.6C10.3,3.6,6.7,3.6,6.4,3.7z<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>st0<span class="token punctuation">"</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>M9.3,32c1.9,1.2,3.8,1.8,5.7,1.8c2.3,0,3.5-0.6,3.5-1.9c0-0.9-1-1.6-2.9-2.2c-2.4-0.8-4.1-1.6-5-2.5S9.3,25,9.3,23.4c0-1.9,0.8-3.4,2.3-4.5s3.6-1.6,6.1-1.6c1.8,0,3.5,0.3,5.2,0.8v4.5c-1.5-0.9-3.2-1.3-5-1.3c-0.9,0-1.6,0.2-2.2,0.5s-0.8,0.7-0.8,1.3c0,0.9,0.8,1.6,2.5,2.2c1.8,0.6,3.1,1.1,4,1.6s1.6,1.1,2,1.9s0.7,1.7,0.7,2.7c0,2-0.8,3.6-2.4,4.7s-3.8,1.7-6.4,1.7c-2.1,0-4.1-0.3-5.9-1V32H9.3z<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>st0<span class="token punctuation">"</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>M40,12.8c-0.8-0.3-1.5-0.5-2.2-0.5c-1.9,0-2.9,1.1-2.9,3.2v2.2h4.4V22h-4.4v15.2h-5.7V22h-3.3v-4.2h3.3v-2.5c0-2.2,0.7-4,2.2-5.3s3.3-2,5.7-2c1.2,0,2.2,0.1,3,0.4L40,12.8L40,12.8z<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code></pre><h1 id="选区"><a href="#选区" class="headerlink" title="选区"></a>选区</h1><p>以 <code>segmentfault</code> 图标 <code>sf</code> 为例，<code>ctrl + A</code> 选择全部路径</p><p><img src="./compound.png" alt="compound"></p><h1 id="复合路径建立后"><a href="#复合路径建立后" class="headerlink" title="复合路径建立后"></a>复合路径建立后</h1><pre class=" language-svg"><code class="language-svg"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token comment" spellcheck="true">&lt;!-- Generator: Adobe Illustrator 22.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1.1<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Layer_1<span class="token punctuation">"</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2000/svg<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xlink</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/1999/xlink<span class="token punctuation">"</span></span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0px<span class="token punctuation">"</span></span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0px<span class="token punctuation">"</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0 0 48 48<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">enable-background</span><span class="token punctuation">:</span>new <span class="token number">0</span> <span class="token number">0</span> <span class="token number">48</span> <span class="token number">48</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xml:</span>space</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>preserve<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>M6.4,3.7C6,3.8,5.3,4.3,4.8,4.7C4.4,5,3.8,6,3.7,6.5c-0.2,0.7-0.2,33.9,0,34.4c0.4,1,1.7,2.3,2.6,2.6c0.4,0.2,35,0.2,35.5,0c0.9-0.3,2.3-1.7,2.6-2.6c0.1-0.3,0.1-3.5,0.1-17.2c0-11,0-16.9-0.1-17.2c-0.1-0.2-0.3-0.6-0.6-1c-0.4-0.6-0.6-0.8-1.2-1.2c-0.4-0.3-0.9-0.5-1.1-0.6C41.4,3.6,33.9,3.6,24,3.6C10.3,3.6,6.7,3.6,6.4,3.7z M9.3,32c1.9,1.2,3.8,1.8,5.7,1.8c2.3,0,3.5-0.6,3.5-1.9c0-0.9-1-1.6-2.9-2.2c-2.4-0.8-4.1-1.6-5-2.5S9.3,25,9.3,23.4c0-1.9,0.8-3.4,2.3-4.5s3.6-1.6,6.1-1.6c1.8,0,3.5,0.3,5.2,0.8v4.5c-1.5-0.9-3.2-1.3-5-1.3c-0.9,0-1.6,0.2-2.2,0.5s-0.8,0.7-0.8,1.3c0,0.9,0.8,1.6,2.5,2.2c1.8,0.6,3.1,1.1,4,1.6s1.6,1.1,2,1.9s0.7,1.7,0.7,2.7c0,2-0.8,3.6-2.4,4.7s-3.8,1.7-6.4,1.7c-2.1,0-4.1-0.3-5.9-1V32H9.3z M40,12.8c-0.8-0.3-1.5-0.5-2.2-0.5c-1.9,0-2.9,1.1-2.9,3.2v2.2h4.4V22h-4.4v15.2h-5.7V22h-3.3v-4.2h3.3v-2.5c0-2.2,0.7-4,2.2-5.3s3.3-2,5.7-2c1.2,0,2.2,0.1,3,0.4L40,12.8L40,12.8z<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code></pre><h1 id="使用-svgomg-优化-svg"><a href="#使用-svgomg-优化-svg" class="headerlink" title="使用 svgomg 优化 svg"></a>使用 svgomg 优化 svg</h1><ul><li><a href="https://jakearchibald.github.io/svgomg/" target="_blank" rel="noopener">https://jakearchibald.github.io/svgomg/</a></li></ul><pre class=" language-svg"><code class="language-svg"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/2000/svg<span class="token punctuation">"</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0 0 48 48<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>M6.4 3.7c-.4.1-1.1.6-1.6 1-.4.3-1 1.3-1.1 1.8-.2.7-.2 33.9 0 34.4.4 1 1.7 2.3 2.6 2.6.4.2 35 .2 35.5 0 .9-.3 2.3-1.7 2.6-2.6.1-.3.1-3.5.1-17.2 0-11 0-16.9-.1-17.2-.1-.2-.3-.6-.6-1-.4-.6-.6-.8-1.2-1.2-.4-.3-.9-.5-1.1-.6-.1-.1-7.6-.1-17.5-.1-13.7 0-17.3 0-17.6.1zM9.3 32c1.9 1.2 3.8 1.8 5.7 1.8 2.3 0 3.5-.6 3.5-1.9 0-.9-1-1.6-2.9-2.2-2.4-.8-4.1-1.6-5-2.5S9.3 25 9.3 23.4c0-1.9.8-3.4 2.3-4.5s3.6-1.6 6.1-1.6c1.8 0 3.5.3 5.2.8v4.5c-1.5-.9-3.2-1.3-5-1.3-.9 0-1.6.2-2.2.5s-.8.7-.8 1.3c0 .9.8 1.6 2.5 2.2 1.8.6 3.1 1.1 4 1.6s1.6 1.1 2 1.9.7 1.7.7 2.7c0 2-.8 3.6-2.4 4.7s-3.8 1.7-6.4 1.7c-2.1 0-4.1-.3-5.9-1V32h-.1zM40 12.8c-.8-.3-1.5-.5-2.2-.5-1.9 0-2.9 1.1-2.9 3.2v2.2h4.4V22h-4.4v15.2h-5.7V22h-3.3v-4.2h3.3v-2.5c0-2.2.7-4 2.2-5.3s3.3-2 5.7-2c1.2 0 2.2.1 3 .4l-.1 4.4z<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">></span></span></code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://jingyan.baidu.com/article/9113f81b24e19a2b3214c7f6.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/9113f81b24e19a2b3214c7f6.html</a> <a href="http://www.zhangxinxu.com/wordpress/2016/02/svg-compress-tool-svgo-experience/" target="_blank" rel="noopener">http://www.zhangxinxu.com/wordpress/2016/02/svg-compress-tool-svgo-experience/</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在网页设计中，我们经常会用到 &lt;code&gt;svg&lt;/code&gt; 图标，本文记录下在制作 &lt;code&gt;svg&lt;/code&gt; 时如何使用复合路径。&lt;/p&gt;
    
    </summary>
    
      <category term="design" scheme="https://tanglj.cn/categories/design/"/>
    
    
      <category term="ux" scheme="https://tanglj.cn/tags/ux/"/>
    
  </entry>
  
  <entry>
    <title>使用 sunny-ngrok 做内网穿透</title>
    <link href="https://tanglj.cn/2018/05/14/use-sunny-ngrok-to-network-penetration/"/>
    <id>https://tanglj.cn/2018/05/14/use-sunny-ngrok-to-network-penetration/</id>
    <published>2018-05-14T02:13:43.000Z</published>
    <updated>2018-11-23T14:23:48.390Z</updated>
    
    <content type="html"><![CDATA[<p>本文记录如何使用 <a href="https://www.ngrok.cc/" target="_blank" rel="noopener">sunny-ngrok</a> 做内网穿透。</p><a id="more"></a><h1 id="搭建内网服务器"><a href="#搭建内网服务器" class="headerlink" title="搭建内网服务器"></a>搭建内网服务器</h1><p>假设在内网 <code>http://192.168.1.12</code> 搭建了 Gitlab 服务器</p><p><img src="./gitlab.png" alt="gitlab"></p><h1 id="注册-sunny-ngrok-并开通免费隧道"><a href="#注册-sunny-ngrok-并开通免费隧道" class="headerlink" title="注册 sunny-ngrok 并开通免费隧道"></a>注册 sunny-ngrok 并开通免费隧道</h1><p>Gitlab 网站需要一个 http 协议隧道，ssh 需要一个 tcp 协议隧道</p><ul><li><a href="https://www.sunnyos.com/article-show-67.html" target="_blank" rel="noopener">开通 http 协议隧道</a></li><li><a href="https://www.sunnyos.com/article-show-70.html" target="_blank" rel="noopener">开通 tcp 协议隧道</a></li></ul><p><img src="./tunnels.png" alt="tunnels"></p><h1 id="下载客户端并启动脚本"><a href="#下载客户端并启动脚本" class="headerlink" title="下载客户端并启动脚本"></a>下载客户端并启动脚本</h1><ul><li><a href="https://www.sunnyos.com/article-show-71.html" target="_blank" rel="noopener">Windows 中使用 sunny-ngrok 脚本</a></li></ul><p><img src="./monitor.png" alt="monitor"></p><h1 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h1><p>外网域名为 <a href="http://pregitlab.free.ngrok.cc" target="_blank" rel="noopener">http://pregitlab.free.ngrok.cc</a></p><h2 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h2><p><img src="./website.png" alt="website"></p><h2 id="SSH-连接"><a href="#SSH-连接" class="headerlink" title="SSH 连接"></a>SSH 连接</h2><blockquote><p>注意 <code>.ssh/config</code> 中的相关配置</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># gitlab</span>Host pregitlab.free.ngrok.cc  HostName pregitlab.free.ngrok.cc  Port 11273  PreferredAuthentications publickey  IdentityFile /home/tlj/.ssh/id_rsa.gitlab</code></pre></blockquote><p><img src="./ssh.png" alt="ssh"></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://www.sunnyos.com/" target="_blank" rel="noopener">https://www.sunnyos.com/</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文记录如何使用 &lt;a href=&quot;https://www.ngrok.cc/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;sunny-ngrok&lt;/a&gt; 做内网穿透。&lt;/p&gt;
    
    </summary>
    
      <category term="operation" scheme="https://tanglj.cn/categories/operation/"/>
    
    
      <category term="network penetration" scheme="https://tanglj.cn/tags/network-penetration/"/>
    
  </entry>
  
  <entry>
    <title>Fedora 开机自动启动 XX-Net</title>
    <link href="https://tanglj.cn/2018/05/12/auto-start-xx-net-boot/"/>
    <id>https://tanglj.cn/2018/05/12/auto-start-xx-net-boot/</id>
    <published>2018-05-12T01:12:26.000Z</published>
    <updated>2018-11-23T14:23:48.278Z</updated>
    
    <content type="html"><![CDATA[<p>本文记录 <a href="http://localhost:4000/2016/02/04/latest-free-vpn/" target="_blank" rel="noopener">XX-Net</a> 开机自动启动的设置。</p><a id="more"></a><h1 id="关联服务脚本"><a href="#关联服务脚本" class="headerlink" title="关联服务脚本"></a>关联服务脚本</h1><p>进入 <code>/etc/init.d</code></p><pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /etc/init.d<span class="token function">sudo</span> <span class="token function">ln</span> -s /home/yourName/XX-Net/xx_net.sh xx_net'</code></pre><h1 id="开启服务并设置开机自动启动"><a href="#开启服务并设置开机自动启动" class="headerlink" title="开启服务并设置开机自动启动"></a>开启服务并设置开机自动启动</h1><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> systemctl start xx-net<span class="token function">sudo</span> systemctl <span class="token function">enable</span> xx-net</code></pre><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://github.com/XX-net/XX-Net/wiki/在Linux下如何将XX-Net作为后台服务启动" target="_blank" rel="noopener">https://github.com/XX-net/XX-Net/wiki/在Linux下如何将XX-Net作为后台服务启动</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文记录 &lt;a href=&quot;http://localhost:4000/2016/02/04/latest-free-vpn/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;XX-Net&lt;/a&gt; 开机自动启动的设置。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="https://tanglj.cn/categories/linux/"/>
    
    
      <category term="fedora" scheme="https://tanglj.cn/tags/fedora/"/>
    
  </entry>
  
  <entry>
    <title>Fedora 系统中安装 Gitlab</title>
    <link href="https://tanglj.cn/2018/05/06/install-gitlab-on-fedora/"/>
    <id>https://tanglj.cn/2018/05/06/install-gitlab-on-fedora/</id>
    <published>2018-05-06T13:39:40.000Z</published>
    <updated>2018-11-23T14:23:48.306Z</updated>
    
    <content type="html"><![CDATA[<p>Gitlab 是一个为了完成 <a href="https://zh.wikipedia.org/wiki/DevOps" target="_blank" rel="noopener">DevOps</a> 工作流的单应用程序。本文记录如何在 Fedora 系统中安装 Gitlab。</p><a id="more"></a><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="硬件环境"><a href="#硬件环境" class="headerlink" title="硬件环境"></a>硬件环境</h2><ul><li>双核 CPU + 2 GB 内存</li></ul><h2 id="需要模块"><a href="#需要模块" class="headerlink" title="需要模块"></a>需要模块</h2><ul><li>安装 curl 用于下载文件</li><li>安装 openssh-server 用于 ssh 连接</li><li>安装 ca-certificates 用于添加 CA 认证</li><li>安装 postfix 用于 MTA</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> dnf <span class="token function">install</span> curl openssh-server ca-certificates postfix</code></pre><h2 id="启动-postfix-服务"><a href="#启动-postfix-服务" class="headerlink" title="启动 postfix 服务"></a>启动 postfix 服务</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> systemctl start sshd postfix</code></pre><p>设置开机启动</p><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> systemctl <span class="token function">enable</span> sshd postfix</code></pre><h1 id="安装-Gitlab"><a href="#安装-Gitlab" class="headerlink" title="安装 Gitlab"></a>安装 Gitlab</h1><h2 id="下载安装包"><a href="#下载安装包" class="headerlink" title="下载安装包"></a>下载安装包</h2><p><a href="https://packages.gitlab.com/gitlab/gitlab-ce?filter=rpms" target="_blank" rel="noopener">https://packages.gitlab.com/gitlab/gitlab-ce?filter=rpms</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><pre class=" language-bash"><code class="language-bash">duso dnf <span class="token function">install</span> <span class="token operator">&lt;</span>path<span class="token operator">></span>/gitlab<span class="token operator">&lt;</span>version-num<span class="token operator">></span>.rpm</code></pre><h2 id="初始化-Gitlab"><a href="#初始化-Gitlab" class="headerlink" title="初始化 Gitlab"></a>初始化 Gitlab</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> gitlab-ctl reconfigure</code></pre><h2 id="设置防火墙"><a href="#设置防火墙" class="headerlink" title="设置防火墙"></a>设置防火墙</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> firewall-cmd --permanent --add-service<span class="token operator">=</span>http<span class="token function">sudo</span> firewall-cmd --reload</code></pre><h2 id="打开-Gitlab"><a href="#打开-Gitlab" class="headerlink" title="打开 Gitlab"></a>打开 Gitlab</h2><p><img src="./screenshot.png" alt="screenshot"></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://linoxide.com/linux-how-to/install-gitlab-on-ubuntu-fedora-debian/" target="_blank" rel="noopener">https://linoxide.com/linux-how-to/install-gitlab-on-ubuntu-fedora-debian/</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Gitlab 是一个为了完成 &lt;a href=&quot;https://zh.wikipedia.org/wiki/DevOps&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;DevOps&lt;/a&gt; 工作流的单应用程序。本文记录如何在 Fedora 系统中安装 Gitlab。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="https://tanglj.cn/categories/linux/"/>
    
    
      <category term="fedora" scheme="https://tanglj.cn/tags/fedora/"/>
    
  </entry>
  
  <entry>
    <title>如何在 Fedora27 系统中安装 Jitamin</title>
    <link href="https://tanglj.cn/2018/03/28/how-to-install-jitamin-on-fedora27/"/>
    <id>https://tanglj.cn/2018/03/28/how-to-install-jitamin-on-fedora27/</id>
    <published>2018-03-28T19:09:29.000Z</published>
    <updated>2018-11-23T14:23:48.306Z</updated>
    
    <content type="html"><![CDATA[<p>Jitamin (读作/ˈdʒɪtəmɪn/) 是一款免费、开源，使用PHP语言开发的项目管理系统。本文记录下如何在 Fedora27 系统中安装 jitamin。</p><a id="more"></a><h1 id="Jitamin-的需求"><a href="#Jitamin-的需求" class="headerlink" title="Jitamin 的需求"></a>Jitamin 的需求</h1><ul><li>Web 服务器：Nginx，Apache，或 Lighttpd</li><li>PHP 5.6+（推荐 PHP 7）</li><li>数据库：MySQL（推荐），PostgreSQL 或 SQLite</li><li>Composer</li></ul><h2 id="安装-Nginx"><a href="#安装-Nginx" class="headerlink" title="安装 Nginx"></a>安装 Nginx</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> dnf <span class="token function">install</span> nginx</code></pre><p>查看安装版本</p><pre class=" language-bash"><code class="language-bash">nginx -Vnginx version: nginx/1.12.1built by gcc 7.1.1 20170802 <span class="token punctuation">(</span>Red Hat 7.1.1-7<span class="token punctuation">)</span> <span class="token punctuation">(</span>GCC<span class="token punctuation">)</span>built with OpenSSL 1.1.0f-fips  25 May 2017 <span class="token punctuation">(</span>running with OpenSSL 1.1.0g-fips  2 Nov 2017<span class="token punctuation">)</span>TLS SNI support enabledconfigure arguments: --prefix<span class="token operator">=</span>/usr/share/nginx --sbin-path<span class="token operator">=</span>/usr/sbin/nginx --modules-path<span class="token operator">=</span>/usr/lib64/nginx/modules --conf-path<span class="token operator">=</span>/etc/nginx/nginx.conf --error-log-path<span class="token operator">=</span>/var/log/nginx/error.log --http-log-path<span class="token operator">=</span>/var/log/nginx/access.log --http-client-body-temp-path<span class="token operator">=</span>/var/lib/nginx/tmp/client_body --http-proxy-temp-path<span class="token operator">=</span>/var/lib/nginx/tmp/proxy --http-fastcgi-temp-path<span class="token operator">=</span>/var/lib/nginx/tmp/fastcgi --http-uwsgi-temp-path<span class="token operator">=</span>/var/lib/nginx/tmp/uwsgi --http-scgi-temp-path<span class="token operator">=</span>/var/lib/nginx/tmp/scgi --pid-path<span class="token operator">=</span>/run/nginx.pid --lock-path<span class="token operator">=</span>/run/lock/subsys/nginx --user<span class="token operator">=</span>nginx --group<span class="token operator">=</span>nginx --with-file-aio --with-ipv6 --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_addition_module --with-http_xslt_module<span class="token operator">=</span>dynamic --with-http_image_filter_module<span class="token operator">=</span>dynamic --with-http_geoip_module<span class="token operator">=</span>dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_stub_status_module --with-http_perl_module<span class="token operator">=</span>dynamic --with-http_auth_request_module --with-mail<span class="token operator">=</span>dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream<span class="token operator">=</span>dynamic --with-stream_ssl_module --with-google_perftools_module --with-debug --with-cc-opt<span class="token operator">=</span><span class="token string">'-O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -m64 -mtune=generic'</span> --with-ld-opt<span class="token operator">=</span><span class="token string">'-Wl,-z,relro -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -Wl,-E'</span></code></pre><h2 id="安装-PHP"><a href="#安装-PHP" class="headerlink" title="安装 PHP"></a>安装 PHP</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> dnf <span class="token function">install</span> php-cli</code></pre><p>查看安装版本</p><pre class=" language-bash"><code class="language-bash">php -vPHP 7.1.15 <span class="token punctuation">(</span>cli<span class="token punctuation">)</span> <span class="token punctuation">(</span>built: Feb 28 2018 11:19:18<span class="token punctuation">)</span> <span class="token punctuation">(</span> NTS <span class="token punctuation">)</span>Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> 1997-2018 The PHP GroupZend Engine v3.1.0, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> 1998-2018 Zend Technologies</code></pre><h2 id="安装-MySQL"><a href="#安装-MySQL" class="headerlink" title="安装 MySQL"></a>安装 MySQL</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> dnf <span class="token function">install</span> mysql</code></pre><p>查看安装版本</p><pre class=" language-bash"><code class="language-bash">mysql -Vmysql  Ver 15.1 Distrib 10.2.13-MariaDB, <span class="token keyword">for</span> Linux <span class="token punctuation">(</span>x86_64<span class="token punctuation">)</span> using readline 5.1</code></pre><h3 id="安装-mysqli-扩展"><a href="#安装-mysqli-扩展" class="headerlink" title="安装 mysqli 扩展"></a>安装 mysqli 扩展</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> dnf <span class="token function">install</span> php-mysqliphp --iniConfiguration File <span class="token punctuation">(</span>php.ini<span class="token punctuation">)</span> Path: /etcLoaded Configuration File:         /etc/php.iniScan <span class="token keyword">for</span> additional .ini files in: /etc/php.dAdditional .ini files parsed:      /etc/php.d/20-bz2.ini,/etc/php.d/20-calendar.ini,/etc/php.d/20-ctype.ini,/etc/php.d/20-curl.ini,/etc/php.d/20-dom.ini,/etc/php.d/20-exif.ini,/etc/php.d/20-fileinfo.ini,/etc/php.d/20-ftp.ini,/etc/php.d/20-gd.ini,/etc/php.d/20-gettext.ini,/etc/php.d/20-iconv.ini,/etc/php.d/20-intl.ini,/etc/php.d/20-json.ini,/etc/php.d/20-mbstring.ini,/etc/php.d/20-mysqlnd.ini,/etc/php.d/20-pdo.ini,/etc/php.d/20-phar.ini,/etc/php.d/20-posix.ini,/etc/php.d/20-shmop.ini,/etc/php.d/20-simplexml.ini,/etc/php.d/20-sockets.ini,/etc/php.d/20-sqlite3.ini,/etc/php.d/20-sysvmsg.ini,/etc/php.d/20-sysvsem.ini,/etc/php.d/20-sysvshm.ini,/etc/php.d/20-tokenizer.ini,/etc/php.d/20-xml.ini,/etc/php.d/20-xmlwriter.ini,/etc/php.d/20-xsl.ini,/etc/php.d/30-mysqli.ini,/etc/php.d/30-pdo_mysql.ini,/etc/php.d/30-pdo_sqlite.ini,/etc/php.d/30-wddx.ini,/etc/php.d/30-xmlreader.ini,/etc/php.d/40-zip.ini</code></pre><h2 id="安装-Composer"><a href="#安装-Composer" class="headerlink" title="安装 Composer"></a>安装 Composer</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> dnf <span class="token function">install</span> composer</code></pre><p>查看安装版本</p><pre class=" language-bash"><code class="language-bash">composer -VComposer version 1.6.3 2018-01-31 16:28:17</code></pre><h1 id="安装-Jitamin"><a href="#安装-Jitamin" class="headerlink" title="安装 Jitamin"></a>安装 Jitamin</h1><h2 id="获取源码"><a href="#获取源码" class="headerlink" title="获取源码"></a>获取源码</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /home/tlj<span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/jitamin/jitamin.git<span class="token function">cd</span> jitamin</code></pre><h2 id="设置配置文件"><a href="#设置配置文件" class="headerlink" title="设置配置文件"></a>设置配置文件</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">cp</span> .env.example .env</code></pre><h2 id="安装-PHP-依赖包"><a href="#安装-PHP-依赖包" class="headerlink" title="安装 PHP 依赖包"></a>安装 PHP 依赖包</h2><pre class=" language-bash"><code class="language-bash">composer <span class="token function">install</span> -o --no-dev</code></pre><h2 id="创建数据库并设置相应的配置文件"><a href="#创建数据库并设置相应的配置文件" class="headerlink" title="创建数据库并设置相应的配置文件"></a>创建数据库并设置相应的配置文件</h2><pre class=" language-bash"><code class="language-bash">MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">></span> CREATE DATABASE jitamin<span class="token punctuation">;</span>MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">></span> CREATE USER <span class="token string">'jitamin'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'jitamin'</span><span class="token punctuation">;</span>MariaDB <span class="token punctuation">[</span><span class="token punctuation">(</span>none<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">></span> GRANT ALL PRIVILEGES ON jitamin.* TO <span class="token string">'jitamin'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'jitamin'</span> WITH GRANT OPTION<span class="token punctuation">;</span></code></pre><h3 id="示例-env"><a href="#示例-env" class="headerlink" title="示例 .env"></a>示例 <code>.env</code></h3><pre class=" language-ini"><code class="language-ini"><span class="token constant">APP_NAME</span><span class="token attr-value"><span class="token punctuation">=</span>Jitamin</span><span class="token constant">APP_ENV</span><span class="token attr-value"><span class="token punctuation">=</span>production</span><span class="token constant">APP_DEBUG</span><span class="token attr-value"><span class="token punctuation">=</span>true</span><span class="token constant">APP_KEY</span><span class="token attr-value"><span class="token punctuation">=</span>SomeRandomString</span><span class="token constant">APP_TIMEZONE</span><span class="token attr-value"><span class="token punctuation">=</span>Asia/Shanghai</span><span class="token constant">APP_LOCALE</span><span class="token attr-value"><span class="token punctuation">=</span>zh-CN</span><span class="token constant">APP_THEME</span><span class="token attr-value"><span class="token punctuation">=</span>black</span><span class="token constant">APP_LOG</span><span class="token attr-value"><span class="token punctuation">=</span>daily</span><span class="token constant">APP_LOG_LEVEL</span><span class="token attr-value"><span class="token punctuation">=</span>error</span><span class="token constant">APP_URL</span><span class="token attr-value"><span class="token punctuation">=</span>http://localhost</span><span class="token constant">DB_CONNECTION</span><span class="token attr-value"><span class="token punctuation">=</span>mysql</span><span class="token constant">DB_HOST</span><span class="token attr-value"><span class="token punctuation">=</span>127.0.0.1</span><span class="token constant">DB_PORT</span><span class="token attr-value"><span class="token punctuation">=</span>3306</span><span class="token constant">DB_DATABASE</span><span class="token attr-value"><span class="token punctuation">=</span>jitamin</span><span class="token constant">DB_USERNAME</span><span class="token attr-value"><span class="token punctuation">=</span>jitamin</span><span class="token constant">DB_PASSWORD</span><span class="token attr-value"><span class="token punctuation">=</span>jitamin</span></code></pre><h3 id="示例-config-config-php"><a href="#示例-config-config-php" class="headerlink" title="示例 ./config/config.php"></a>示例 <code>./config/config.php</code></h3><pre class=" language-php"><code class="language-php"><span class="token delimiter">&lt;?php</span><span class="token comment" spellcheck="true">/* * This file is part of Jitamin. * * Copyright (C) Jitamin Team * * For the full copyright and license information, please view the LICENSE * file that was distributed with this source code. */</span><span class="token keyword">return</span> <span class="token punctuation">[</span>    <span class="token comment" spellcheck="true">// Enable/Disable debug</span>    <span class="token string">'debug'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'APP_DEBUG'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// Available log drivers: syslog, stderr, stdout or file</span>    <span class="token string">'log_driver'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'APP_LOG'</span><span class="token punctuation">,</span> <span class="token string">'file'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// Available cache drivers are "file", "memory" and "memcached"</span>    <span class="token string">'cache_driver'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'memory'</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// Hide login form, useful if all your users use Google/Github/ReverseProxy authentication</span>    <span class="token string">'hide_login_form'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// Enable/disable url rewrite</span>    <span class="token string">'enable_url_rewrite'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// Available db drivers are "mysql", "sqlite" and "postgres"</span>    <span class="token string">'db_driver'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'DB_CONNECTION'</span><span class="token punctuation">,</span> <span class="token string">'mysql'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token string">'db_connections'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>        <span class="token string">'sqlite'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>            <span class="token string">'driver'</span>   <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'sqlite'</span><span class="token punctuation">,</span>            <span class="token string">'database'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'jitamin'</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token string">'mysql'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>            <span class="token string">'driver'</span>    <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'mysql'</span><span class="token punctuation">,</span>            <span class="token string">'host'</span>      <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'DB_HOST'</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'database'</span>  <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'DB_DATABASE'</span><span class="token punctuation">,</span> <span class="token string">'jitamin'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'username'</span>  <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'DB_USERNAME'</span><span class="token punctuation">,</span> <span class="token string">'jitamin'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'password'</span>  <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'DB_PASSWORD'</span><span class="token punctuation">,</span> <span class="token string">'jitamin'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'port'</span>      <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'DB_PORT'</span><span class="token punctuation">,</span> <span class="token string">'3306'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'charset'</span>   <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'utf8'</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token string">'pgsql'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">[</span>            <span class="token string">'driver'</span>   <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'pgsql'</span><span class="token punctuation">,</span>            <span class="token string">'host'</span>     <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'DB_HOST'</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'database'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'DB_DATABASE'</span><span class="token punctuation">,</span> <span class="token string">'jitamin'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'username'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'DB_USERNAME'</span><span class="token punctuation">,</span> <span class="token string">'postgres'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'password'</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token string">'DB_PASSWORD'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token string">'port'</span>     <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'5432'</span><span class="token punctuation">,</span>            <span class="token string">'charset'</span>  <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'utf8'</span><span class="token punctuation">,</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre><h2 id="移植并初始化数据库"><a href="#移植并初始化数据库" class="headerlink" title="移植并初始化数据库"></a>移植并初始化数据库</h2><pre class=" language-bash"><code class="language-bash">vendor/bin/phinx migratevendor/bin/phinx seed:run</code></pre><h2 id="确保-bootstrap-cache-和-storage-有写入权限"><a href="#确保-bootstrap-cache-和-storage-有写入权限" class="headerlink" title="确保 bootstrap/cache 和 storage 有写入权限"></a>确保 <code>bootstrap/cache</code> 和 <code>storage</code> 有写入权限</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">chmod</span> -R 777 bootstrap/cache<span class="token function">chmod</span> -R 777 storage</code></pre><h1 id="运行-Jitamin"><a href="#运行-Jitamin" class="headerlink" title="运行 Jitamin"></a>运行 Jitamin</h1><h2 id="配置-Nginx"><a href="#配置-Nginx" class="headerlink" title="配置 Nginx"></a>配置 Nginx</h2><pre class=" language-nginx"><code class="language-nginx"><span class="token comment" spellcheck="true"># jitamin 服务器</span><span class="token keyword">server</span> <span class="token punctuation">{</span>  <span class="token keyword">listen</span> <span class="token number">3000</span><span class="token punctuation">;</span>  <span class="token keyword">server_name</span> <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">;</span>  <span class="token keyword">root</span> <span class="token operator">/</span>home<span class="token operator">/</span>tlj<span class="token operator">/</span>jitamin<span class="token operator">/</span>public<span class="token punctuation">;</span>  <span class="token keyword">client_max_body_size</span> 1024m<span class="token punctuation">;</span>  <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>    <span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span><span class="token operator">/</span> <span class="token operator">/</span><span class="token keyword">index</span><span class="token punctuation">.</span>php<span class="token variable">$is_args</span><span class="token variable">$args</span><span class="token punctuation">;</span>    <span class="token keyword">index</span> <span class="token keyword">index</span><span class="token punctuation">.</span>php<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">location</span> <span class="token operator">~</span> \<span class="token punctuation">.</span>php <span class="token punctuation">{</span>    <span class="token keyword">fastcgi_pass</span> <span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">9000</span><span class="token punctuation">;</span>    <span class="token keyword">fastcgi_index</span> <span class="token keyword">index</span><span class="token punctuation">.</span>php<span class="token punctuation">;</span>    <span class="token keyword">include</span> fastcgi<span class="token punctuation">.</span>conf<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="开启相关服务"><a href="#开启相关服务" class="headerlink" title="开启相关服务"></a>开启相关服务</h2><h3 id="启动-nginx"><a href="#启动-nginx" class="headerlink" title="启动 nginx"></a>启动 nginx</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> systemctl start nginx</code></pre><h3 id="启动-mysql"><a href="#启动-mysql" class="headerlink" title="启动 mysql"></a>启动 mysql</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> systemctl start mariadb</code></pre><h3 id="启动-php"><a href="#启动-php" class="headerlink" title="启动 php"></a>启动 php</h3><pre class=" language-bash"><code class="language-bash">php-cgi -b 127.0.0.1:9000</code></pre><h3 id="浏览器进入系统"><a href="#浏览器进入系统" class="headerlink" title="浏览器进入系统"></a>浏览器进入系统</h3><p><img src="./login.png" alt="login"></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://github.com/jitamin/jitamin/blob/master/README.md" target="_blank" rel="noopener">https://github.com/jitamin/jitamin/blob/master/README.md</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Jitamin (读作/ˈdʒɪtəmɪn/) 是一款免费、开源，使用PHP语言开发的项目管理系统。本文记录下如何在 Fedora27 系统中安装 jitamin。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="https://tanglj.cn/categories/linux/"/>
    
    
      <category term="fedora" scheme="https://tanglj.cn/tags/fedora/"/>
    
  </entry>
  
  <entry>
    <title>Electron BrowserWindow 类</title>
    <link href="https://tanglj.cn/2018/02/14/electron-browser-window/"/>
    <id>https://tanglj.cn/2018/02/14/electron-browser-window/</id>
    <published>2018-02-14T01:42:34.000Z</published>
    <updated>2018-11-23T14:23:48.282Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://electronjs.org/docs/api/browser-window#browserwindow" target="_blank" rel="noopener">BrowserWindow</a> 创建并控制浏览器窗口。</p><a id="more"></a><h1 id="小试牛刀"><a href="#小试牛刀" class="headerlink" title="小试牛刀"></a>小试牛刀</h1><p>创建一个窗口，加载 <code>https://github.com</code></p><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> electron <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'electron'</span><span class="token punctuation">)</span><span class="token keyword">const</span> BrowserWindow <span class="token operator">=</span> electron<span class="token punctuation">.</span>BrowserWindow<span class="token keyword">const</span> app <span class="token operator">=</span> electron<span class="token punctuation">.</span>app<span class="token keyword">let</span> mainWindow<span class="token keyword">function</span> <span class="token function">createWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    width<span class="token punctuation">:</span> <span class="token number">800</span><span class="token punctuation">,</span>    height<span class="token punctuation">:</span> <span class="token number">600</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// 使用接近应用程序背景色提升用户体验</span>    <span class="token comment" spellcheck="true">// https://electronjs.org/docs/api/browser-window#showing-window-gracefully</span>    backgroundColor<span class="token punctuation">:</span> <span class="token string">'#2e2c29'</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  mainWindow<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'closed'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    mainWindow <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  mainWindow<span class="token punctuation">.</span><span class="token function">loadURL</span><span class="token punctuation">(</span><span class="token string">'https://github.com'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> createWindow<span class="token punctuation">)</span></code></pre><p><img src="./loadurl.gif" alt="loadurl"></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><a href="https://electronjs.org/docs/api/browser-window" target="_blank" rel="noopener">https://electronjs.org/docs/api/browser-window</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://electronjs.org/docs/api/browser-window#browserwindow&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;BrowserWindow&lt;/a&gt; 创建并控制浏览器窗口。&lt;/p&gt;
    
    </summary>
    
      <category term="electron" scheme="https://tanglj.cn/categories/electron/"/>
    
    
      <category term="api" scheme="https://tanglj.cn/tags/api/"/>
    
  </entry>
  
</feed>
